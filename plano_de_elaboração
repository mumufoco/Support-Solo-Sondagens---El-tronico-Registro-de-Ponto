# PLANO COMPLETO PARA CLAUDE CODE
## Sistema de Ponto Eletr√¥nico Brasileiro - Desenvolvimento Agentico

---

## üìã √çNDICE

1. [Vis√£o Geral do Projeto](#1-vis√£o-geral-do-projeto)
2. [Fluxogramas Completos](#2-fluxogramas-completos)
3. [Estrutura do Projeto](#3-estrutura-do-projeto)
4. [Comandos Claude Code por Fase](#4-comandos-claude-code-por-fase)
5. [Prompts Detalhados](#5-prompts-detalhados)
6. [Testes e Valida√ß√£o](#6-testes-e-valida√ß√£o)

---

## 1. VIS√ÉO GERAL DO PROJETO

### 1.1 Objetivo
Desenvolver aplicativo web de ponto eletr√¥nico para empresas brasileiras (20-30 funcion√°rios) em conformidade com:
- Portaria MTE 671/2021
- CLT Art. 74
- LGPD Lei 13.709/2018

### 1.2 Stack Tecnol√≥gica

```
Backend:      CodeIgniter 4 (PHP 8.1+)
Frontend:     HTML5, JavaScript, Bootstrap 5
Banco:        MySQL 8.0+
Biometria:    CompreFace (Docker) + SourceAFIS
Mapas:        OpenStreetMap + Leaflet.js
Servidor:     VPS Ubuntu 22.04 + Docker
```

### 1.3 M√≥dulos Principais

1. **Autentica√ß√£o** (Login/Registro/Perfis)
2. **Registro de Ponto** (C√≥digo/QR/Facial/Biometria)
3. **Geolocaliza√ß√£o** (Cerca virtual)
4. **Justificativas** (Faltas/Atrasos + Anexos)
5. **Folha de Ponto** (C√°lculo autom√°tico)
6. **Relat√≥rios** (Exporta√ß√£o/Visualiza√ß√£o)
7. **Chat Interno** (WebSocket)
8. **Configura√ß√µes** (Admin/APIs)
9. **Advert√™ncias** (Assinatura digital)
10. **LGPD** (Consentimentos/Audit)

---

## 2. FLUXOGRAMAS COMPLETOS

### 2.1 Fluxograma Geral do Sistema

```mermaid
graph TB
    Start([Usu√°rio acessa sistema]) --> Login{Login v√°lido?}
    Login -->|N√£o| LoginPage[P√°gina de Login]
    LoginPage --> RegisterOpt{Novo usu√°rio?}
    RegisterOpt -->|Sim| Register[Registro de Conta]
    RegisterOpt -->|N√£o| LoginPage
    Register --> Login
    
    Login -->|Sim| CheckRole{Verificar Perfil}
    
    CheckRole -->|Admin| AdminDash[Dashboard Admin]
    CheckRole -->|Gestor| GestorDash[Dashboard Gestor]
    CheckRole -->|Funcion√°rio| FuncDash[Dashboard Funcion√°rio]
    
    AdminDash --> AdminActions[Configura√ß√µes<br/>Relat√≥rios Globais<br/>Gerenciar Usu√°rios<br/>APIs/Integra√ß√µes]
    GestorDash --> GestorActions[Bater Ponto<br/>Cadastrar Funcion√°rios<br/>Justificar Aus√™ncias<br/>Relat√≥rios de Equipe]
    FuncDash --> FuncActions[Bater Ponto<br/>Consultar Jornada<br/>Justificar Faltas]
    
    AdminActions --> End([Logout])
    GestorActions --> End
    FuncActions --> End
```

### 2.2 Fluxograma - Registro de Ponto

```mermaid
graph TB
    Start([Funcion√°rio clica<br/>"Bater Ponto"]) --> CheckSchedule{Dentro do<br/>hor√°rio permitido?}
    
    CheckSchedule -->|N√£o| BlockMsg[Mensagem: Fora do<br/>expediente]
    BlockMsg --> End([Retornar ao Dashboard])
    
    CheckSchedule -->|Sim| SelectMethod{Escolher m√©todo<br/>de registro}
    
    SelectMethod -->|C√≥digo √önico| EnterCode[Digitar c√≥digo]
    SelectMethod -->|QR Code| ScanQR[Escanear QR Code]
    SelectMethod -->|Facial| CapturePhoto[Capturar foto facial]
    SelectMethod -->|Biometria| ScanFingerprint[Escanear impress√£o digital]
    
    EnterCode --> ValidateCode{C√≥digo v√°lido?}
    ValidateCode -->|N√£o| ErrorCode[Erro: C√≥digo inv√°lido]
    ErrorCode --> SelectMethod
    ValidateCode -->|Sim| GetLocation
    
    ScanQR --> ValidateQR{QR v√°lido?}
    ValidateQR -->|N√£o| ErrorQR[Erro: QR inv√°lido]
    ErrorQR --> SelectMethod
    ValidateQR -->|Sim| GetLocation
    
    CapturePhoto --> SendToCompreFace[Enviar para CompreFace]
    SendToCompreFace --> VerifyFace{Similaridade >= 80%?}
    VerifyFace -->|N√£o| ErrorFace[Erro: Rosto n√£o reconhecido]
    ErrorFace --> SelectMethod
    VerifyFace -->|Sim| GetLocation
    
    ScanFingerprint --> SendToSourceAFIS[Enviar para SourceAFIS]
    SendToSourceAFIS --> VerifyFingerprint{Match encontrado?}
    VerifyFingerprint -->|N√£o| ErrorFinger[Erro: Digital n√£o reconhecida]
    ErrorFinger --> SelectMethod
    VerifyFingerprint -->|Sim| GetLocation
    
    GetLocation[Obter geolocaliza√ß√£o] --> CheckGeofence{Dentro da<br/>cerca virtual?}
    
    CheckGeofence -->|N√£o| WarningGeo[Aviso: Fora da √°rea<br/>permitida]
    WarningGeo --> ConfirmOutside{Confirmar registro<br/>mesmo assim?}
    ConfirmOutside -->|N√£o| SelectMethod
    ConfirmOutside -->|Sim| SavePunch
    
    CheckGeofence -->|Sim| SavePunch[Salvar marca√ß√£o<br/>no banco de dados]
    
    SavePunch --> GenerateNSR[Gerar NSR<br/>Sequencial]
    GenerateNSR --> GenerateHash[Gerar hash SHA-256]
    GenerateHash --> GenerateReceipt[Gerar comprovante<br/>eletr√¥nico]
    GenerateReceipt --> SendNotification[Enviar notifica√ß√£o<br/>e-mail/push]
    SendNotification --> ShowSuccess[Mensagem: Ponto<br/>registrado com sucesso]
    ShowSuccess --> End
```

### 2.3 Fluxograma - Justificativa de Aus√™ncia

```mermaid
graph TB
    Start([Funcion√°rio/Gestor<br/>acessa Justificativas]) --> SelectDate[Selecionar data<br/>da aus√™ncia]
    
    SelectDate --> SelectType{Tipo de<br/>justificativa}
    
    SelectType -->|Falta| FaltaForm[Formul√°rio de Falta]
    SelectType -->|Atraso| AtrasoForm[Formul√°rio de Atraso]
    SelectType -->|Sa√≠da Antecipada| SaidaForm[Formul√°rio de Sa√≠da]
    
    FaltaForm --> EnterReason[Inserir motivo<br/>detalhado]
    AtrasoForm --> EnterReason
    SaidaForm --> EnterReason
    
    EnterReason --> AttachFiles{Anexar<br/>documentos?}
    
    AttachFiles -->|Sim| UploadFiles[Upload de arquivos<br/>PDF, JPG, PNG]
    AttachFiles -->|N√£o| ValidateForm
    
    UploadFiles --> ValidateFiles{Arquivos v√°lidos?<br/>Max 5MB cada}
    ValidateFiles -->|N√£o| ErrorFile[Erro: Arquivo inv√°lido<br/>ou muito grande]
    ErrorFile --> AttachFiles
    ValidateFiles -->|Sim| ValidateForm
    
    ValidateForm{Formul√°rio<br/>completo?} -->|N√£o| ErrorForm[Erro: Preencher<br/>campos obrigat√≥rios]
    ErrorForm --> EnterReason
    
    ValidateForm -->|Sim| CheckRole{Quem est√°<br/>justificando?}
    
    CheckRole -->|Gestor| AutoApprove[Justificativa<br/>aprovada automaticamente]
    CheckRole -->|Funcion√°rio| PendingApproval[Justificativa<br/>pendente de aprova√ß√£o]
    
    AutoApprove --> SaveJustification[Salvar no banco<br/>de dados]
    PendingApproval --> NotifyManager[Notificar gestor<br/>para aprova√ß√£o]
    NotifyManager --> SaveJustification
    
    SaveJustification --> AuditLog[Registrar em<br/>audit log]
    AuditLog --> ShowSuccess[Mensagem: Justificativa<br/>enviada com sucesso]
    ShowSuccess --> End([Retornar])
```

### 2.4 Fluxograma - C√°lculo de Folha de Ponto

```mermaid
graph TB
    Start([Sistema executa<br/>c√°lculo di√°rio - CRON]) --> GetEmployees[Buscar todos<br/>funcion√°rios ativos]
    
    GetEmployees --> LoopEmployee{Para cada<br/>funcion√°rio}
    
    LoopEmployee --> GetPunches[Buscar marca√ß√µes<br/>do dia]
    
    GetPunches --> ValidatePairs{Marca√ß√µes<br/>pareadas?}
    
    ValidatePairs -->|N√£o| FlagIncomplete[Marcar como<br/>jornada incompleta]
    FlagIncomplete --> NotifyEmployee[Notificar funcion√°rio<br/>e gestor]
    NotifyEmployee --> LoopEmployee
    
    ValidatePairs -->|Sim| CalcTotal[Calcular total de<br/>horas trabalhadas]
    
    CalcTotal --> GetSchedule[Buscar jornada<br/>esperada do funcion√°rio]
    
    GetSchedule --> CalcDiff[Calcular diferen√ßa:<br/>Trabalhado - Esperado]
    
    CalcDiff --> CheckDiff{Diferen√ßa?}
    
    CheckDiff -->|Positiva| AddExtra[Adicionar a banco<br/>de horas positivo]
    CheckDiff -->|Negativa| CheckJustification{Possui<br/>justificativa?}
    CheckDiff -->|Zero| SaveNormal[Salvar jornada<br/>normal]
    
    CheckJustification -->|Sim| MarkJustified[Marcar como<br/>justificado]
    CheckJustification -->|N√£o| AddDebt[Adicionar a banco<br/>de horas negativo]
    
    AddExtra --> CheckBreaks[Validar intervalos<br/>obrigat√≥rios]
    MarkJustified --> CheckBreaks
    AddDebt --> CheckBreaks
    SaveNormal --> CheckBreaks
    
    CheckBreaks --> ValidateBreaks{Intervalos<br/>corretos?}
    
    ValidateBreaks -->|N√£o| FlagBreakViolation[Marcar viola√ß√£o<br/>de intervalo]
    FlagBreakViolation --> CalcPenalty[Calcular pagamento<br/>como hora extra 50%]
    CalcPenalty --> SaveRecord
    
    ValidateBreaks -->|Sim| SaveRecord[Salvar registro<br/>consolidado do dia]
    
    SaveRecord --> UpdateBalance[Atualizar saldo<br/>de horas acumulado]
    
    UpdateBalance --> LoopEmployee
    
    LoopEmployee -->|Fim| GenerateReports[Gerar relat√≥rios<br/>consolidados]
    
    GenerateReports --> End([Finalizar processo])
```

### 2.5 Fluxograma - Cadastro Biom√©trico

```mermaid
graph TB
    Start([Admin/Gestor inicia<br/>cadastro biom√©trico]) --> SelectEmployee[Selecionar<br/>funcion√°rio]
    
    SelectEmployee --> SelectBioType{Tipo de<br/>biometria}
    
    SelectBioType -->|Facial| FaceSetup[Configurar<br/>reconhecimento facial]
    SelectBioType -->|Digital| FingerprintSetup[Configurar<br/>impress√£o digital]
    
    FaceSetup --> FaceInstruct[Instru√ß√µes: Posicionar<br/>rosto bem iluminado]
    FaceInstruct --> Capture1[Capturar foto 1<br/>frente]
    Capture1 --> Capture2[Capturar foto 2<br/>leve √¢ngulo direita]
    Capture2 --> Capture3[Capturar foto 3<br/>leve √¢ngulo esquerda]
    
    Capture3 --> ValidatePhotos{Fotos com<br/>qualidade adequada?}
    ValidatePhotos -->|N√£o| ErrorQuality[Erro: Fotos com<br/>pouca qualidade]
    ErrorQuality --> FaceInstruct
    
    ValidatePhotos -->|Sim| SendCompreFace[Enviar para CompreFace<br/>criar subject]
    SendCompreFace --> CompreFaceSuccess{Cadastro bem<br/>sucedido?}
    CompreFaceSuccess -->|N√£o| ErrorCompreFace[Erro: Falha no<br/>CompreFace]
    ErrorCompreFace --> FaceInstruct
    
    CompreFaceSuccess -->|Sim| RequestConsent[Solicitar consentimento<br/>LGPD para biometria]
    
    FingerprintSetup --> FingerprintInstruct[Instru√ß√µes: Posicionar<br/>dedo no leitor]
    FingerprintInstruct --> ScanFinger1[Escanear dedo 1<br/>indicador direito]
    ScanFinger1 --> ScanFinger2[Escanear dedo 2<br/>indicador esquerdo]
    ScanFinger2 --> ScanFinger3[Escanear dedo 3<br/>polegar direito - backup]
    
    ScanFinger3 --> ValidateFingerprints{Templates com<br/>qualidade ISO?}
    ValidateFingerprints -->|N√£o| ErrorFingerQuality[Erro: Impress√µes<br/>com pouca qualidade]
    ErrorFingerQuality --> FingerprintInstruct
    
    ValidateFingerprints -->|Sim| ExtractTemplate[Extrair template<br/>ISO 19794-2]
    ExtractTemplate --> RequestConsent
    
    RequestConsent --> ShowConsent[Exibir termo de<br/>consentimento LGPD]
    ShowConsent --> EmployeeConsent{Funcion√°rio<br/>concorda?}
    
    EmployeeConsent -->|N√£o| CancelSetup[Cancelar cadastro<br/>biom√©trico]
    CancelSetup --> End([Retornar])
    
    EmployeeConsent -->|Sim| EncryptData[Criptografar dados<br/>biom√©tricos AES-256]
    
    EncryptData --> GenerateHash[Gerar hash SHA-256<br/>para matching]
    
    GenerateHash --> SaveDB[Salvar no banco<br/>de dados criptografado]
    
    SaveDB --> LogConsent[Registrar consentimento<br/>LGPD com timestamp]
    
    LogConsent --> AuditLog[Registrar em<br/>audit log]
    
    AuditLog --> ShowSuccess[Mensagem: Biometria<br/>cadastrada com sucesso]
    
    ShowSuccess --> End
```

### 2.6 Fluxograma - Sistema de Notifica√ß√µes

```mermaid
graph TB
    Start([Evento dispara<br/>notifica√ß√£o]) --> CheckEvent{Tipo de<br/>evento}
    
    CheckEvent -->|Ponto Registrado| NotifyPunch[Preparar notifica√ß√£o<br/>de ponto]
    CheckEvent -->|Justificativa Pendente| NotifyJustification[Preparar notifica√ß√£o<br/>de justificativa]
    CheckEvent -->|Lembrete de Ponto| NotifyReminder[Preparar lembrete<br/>para bater ponto]
    CheckEvent -->|Advert√™ncia| NotifyWarning[Preparar notifica√ß√£o<br/>de advert√™ncia]
    CheckEvent -->|Saldo Negativo| NotifyDebt[Preparar notifica√ß√£o<br/>de saldo negativo]
    
    NotifyPunch --> GetPreferences
    NotifyJustification --> GetPreferences
    NotifyReminder --> GetPreferences
    NotifyWarning --> GetPreferences
    NotifyDebt --> GetPreferences
    
    GetPreferences[Buscar prefer√™ncias<br/>do usu√°rio] --> CheckChannels{Canais<br/>habilitados?}
    
    CheckChannels -->|E-mail| PrepareEmail[Preparar e-mail<br/>HTML formatado]
    CheckChannels -->|Push| PreparePush[Preparar notifica√ß√£o<br/>push]
    CheckChannels -->|SMS| PrepareSMS[Preparar mensagem<br/>SMS]
    CheckChannels -->|Nenhum| End([Cancelar notifica√ß√£o])
    
    PrepareEmail --> QueueEmail[Adicionar √† fila<br/>de e-mails]
    PreparePush --> QueuePush[Adicionar √† fila<br/>de push]
    PrepareSMS --> QueueSMS[Adicionar √† fila<br/>de SMS]
    
    QueueEmail --> ProcessQueue
    QueuePush --> ProcessQueue
    QueueSMS --> ProcessQueue
    
    ProcessQueue[Worker processa<br/>fila] --> SendEmail{Enviar<br/>e-mail?}
    
    SendEmail -->|Sim| SMTPSend[Enviar via SMTP]
    SMTPSend --> CheckEmailSuccess{Enviado com<br/>sucesso?}
    CheckEmailSuccess -->|N√£o| RetryEmail[Agendar retry<br/>em 5 minutos]
    CheckEmailSuccess -->|Sim| LogEmailSuccess[Registrar envio<br/>bem sucedido]
    RetryEmail --> ProcessQueue
    LogEmailSuccess --> SendPush
    
    SendEmail -->|N√£o| SendPush
    
    SendPush{Enviar<br/>push?} -->|Sim| FCMSend[Enviar via Firebase<br/>Cloud Messaging]
    FCMSend --> CheckPushSuccess{Enviado com<br/>sucesso?}
    CheckPushSuccess -->|N√£o| RetryPush[Agendar retry<br/>em 5 minutos]
    CheckPushSuccess -->|Sim| LogPushSuccess[Registrar envio<br/>bem sucedido]
    RetryPush --> ProcessQueue
    LogPushSuccess --> SendSMS
    
    SendPush -->|N√£o| SendSMS
    
    SendSMS{Enviar<br/>SMS?} -->|Sim| SMSSend[Enviar via gateway<br/>SMS]
    SMSSend --> CheckSMSSuccess{Enviado com<br/>sucesso?}
    CheckSMSSuccess -->|N√£o| RetrySMS[Agendar retry<br/>em 5 minutos]
    CheckSMSSuccess -->|Sim| LogSMSSuccess[Registrar envio<br/>bem sucedido]
    RetrySMS --> ProcessQueue
    LogSMSSuccess --> UpdateNotification
    
    SendSMS -->|N√£o| UpdateNotification
    
    UpdateNotification[Atualizar status<br/>da notifica√ß√£o] --> End
```

### 2.7 Fluxograma - Chat Interno

```mermaid
graph TB
    Start([Usu√°rio abre<br/>Chat]) --> LoadContacts[Carregar lista<br/>de contatos]
    
    LoadContacts --> CheckRole{Verificar<br/>perfil}
    
    CheckRole -->|Admin| ShowAllUsers[Mostrar todos<br/>usu√°rios do sistema]
    CheckRole -->|Gestor| ShowTeam[Mostrar equipe<br/>e outros gestores]
    CheckRole -->|Funcion√°rio| ShowManagersAndPeers[Mostrar gestores<br/>e colegas]
    
    ShowAllUsers --> DisplayContacts[Exibir lista<br/>de contatos]
    ShowTeam --> DisplayContacts
    ShowManagersAndPeers --> DisplayContacts
    
    DisplayContacts --> UserAction{A√ß√£o do<br/>usu√°rio}
    
    UserAction -->|Selecionar contato| OpenChat[Abrir conversa<br/>com contato]
    UserAction -->|Buscar| SearchContact[Buscar por nome<br/>ou departamento]
    UserAction -->|Nova mensagem| SelectRecipient[Selecionar<br/>destinat√°rio]
    
    SearchContact --> DisplayContacts
    SelectRecipient --> OpenChat
    
    OpenChat --> LoadHistory[Carregar hist√≥rico<br/>de mensagens]
    LoadHistory --> EstablishWebSocket[Estabelecer conex√£o<br/>WebSocket]
    
    EstablishWebSocket --> CheckConnection{Conex√£o<br/>estabelecida?}
    CheckConnection -->|N√£o| FallbackPolling[Fallback para<br/>polling HTTP]
    CheckConnection -->|Sim| DisplayChat[Exibir interface<br/>de chat]
    FallbackPolling --> DisplayChat
    
    DisplayChat --> ChatLoop{Aguardar<br/>a√ß√£o}
    
    ChatLoop -->|Digitar mensagem| TypeMessage[Usu√°rio digita<br/>mensagem]
    ChatLoop -->|Receber mensagem| ReceiveMessage[Receber mensagem<br/>via WebSocket]
    ChatLoop -->|Anexar arquivo| AttachFile[Selecionar arquivo<br/>para anexar]
    ChatLoop -->|Enviar emoji| SelectEmoji[Selecionar emoji]
    
    TypeMessage --> SendButton{Pressionar<br/>Enviar?}
    SendButton -->|Sim| ValidateMessage{Mensagem<br/>n√£o vazia?}
    ValidateMessage -->|N√£o| ChatLoop
    ValidateMessage -->|Sim| SendViaWebSocket
    
    AttachFile --> ValidateFile{Arquivo v√°lido?<br/>Max 10MB}
    ValidateFile -->|N√£o| ErrorFile[Erro: Arquivo<br/>inv√°lido]
    ErrorFile --> ChatLoop
    ValidateFile -->|Sim| UploadFile[Upload do arquivo<br/>para servidor]
    UploadFile --> SendViaWebSocket
    
    SelectEmoji --> AddToMessage[Adicionar emoji<br/>√† mensagem]
    AddToMessage --> ChatLoop
    
    SendViaWebSocket[Enviar via WebSocket] --> SaveMessage[Salvar mensagem<br/>no banco de dados]
    
    SaveMessage --> CheckRecipientOnline{Destinat√°rio<br/>online?}
    
    CheckRecipientOnline -->|Sim| DeliverWebSocket[Entregar via<br/>WebSocket]
    CheckRecipientOnline -->|N√£o| QueuePushNotification[Agendar notifica√ß√£o<br/>push]
    
    DeliverWebSocket --> MarkDelivered[Marcar como<br/>entregue]
    QueuePushNotification --> MarkDelivered
    
    MarkDelivered --> UpdateUI[Atualizar UI<br/>remetente]
    UpdateUI --> ChatLoop
    
    ReceiveMessage --> DisplayNewMessage[Exibir nova<br/>mensagem]
    DisplayNewMessage --> SendReadReceipt[Enviar confirma√ß√£o<br/>de leitura]
    SendReadReceipt --> PlayNotificationSound[Tocar som de<br/>notifica√ß√£o]
    PlayNotificationSound --> ChatLoop
    
    ChatLoop -->|Fechar chat| CloseWebSocket[Fechar conex√£o<br/>WebSocket]
    CloseWebSocket --> End([Retornar])
```

### 2.8 Fluxograma - Relat√≥rios

```mermaid
graph TB
    Start([Usu√°rio acessa<br/>Relat√≥rios]) --> CheckRole{Verificar<br/>perfil}
    
    CheckRole -->|Admin| ShowAllReports[Exibir todos os tipos<br/>de relat√≥rios]
    CheckRole -->|Gestor| ShowTeamReports[Exibir relat√≥rios<br/>da equipe]
    CheckRole -->|Funcion√°rio| ShowPersonalReports[Exibir relat√≥rios<br/>pessoais]
    
    ShowAllReports --> SelectReportType
    ShowTeamReports --> SelectReportType
    ShowPersonalReports --> SelectReportType
    
    SelectReportType{Selecionar tipo<br/>de relat√≥rio} -->|Folha de Ponto| ConfigTimesheetReport
    SelectReportType -->|Horas Extras| ConfigOvertimeReport
    SelectReportType -->|Faltas e Atrasos| ConfigAbsenceReport
    SelectReportType -->|Banco de Horas| ConfigHourBankReport
    SelectReportType -->|Consolidado Mensal| ConfigMonthlyReport
    SelectReportType -->|Justificativas| ConfigJustificationReport
    SelectReportType -->|Advert√™ncias| ConfigWarningReport
    SelectReportType -->|Personalizado| ConfigCustomReport
    
    ConfigTimesheetReport[Configurar relat√≥rio<br/>de folha de ponto] --> SelectFilters
    ConfigOvertimeReport[Configurar relat√≥rio<br/>de horas extras] --> SelectFilters
    ConfigAbsenceReport[Configurar relat√≥rio<br/>de faltas/atrasos] --> SelectFilters
    ConfigHourBankReport[Configurar relat√≥rio<br/>de banco de horas] --> SelectFilters
    ConfigMonthlyReport[Configurar relat√≥rio<br/>mensal consolidado] --> SelectFilters
    ConfigJustificationReport[Configurar relat√≥rio<br/>de justificativas] --> SelectFilters
    ConfigWarningReport[Configurar relat√≥rio<br/>de advert√™ncias] --> SelectFilters
    ConfigCustomReport[Configurar relat√≥rio<br/>personalizado] --> SelectFilters
    
    SelectFilters[Selecionar filtros] --> FilterEmployee{Filtrar por<br/>funcion√°rio?}
    FilterEmployee -->|Sim| SelectEmployee[Selecionar<br/>funcion√°rio(s)]
    FilterEmployee -->|N√£o| FilterDepartment
    SelectEmployee --> FilterDepartment
    
    FilterDepartment{Filtrar por<br/>departamento?} -->|Sim| SelectDepartment[Selecionar<br/>departamento(s)]
    FilterDepartment -->|N√£o| FilterPeriod
    SelectDepartment --> FilterPeriod
    
    FilterPeriod[Selecionar per√≠odo] --> PeriodType{Tipo de<br/>per√≠odo}
    PeriodType -->|Data espec√≠fica| SelectDate[Selecionar data]
    PeriodType -->|Intervalo| SelectDateRange[Selecionar data<br/>inicial e final]
    PeriodType -->|M√™s| SelectMonth[Selecionar m√™s]
    PeriodType -->|Ano| SelectYear[Selecionar ano]
    
    SelectDate --> FilterStatus
    SelectDateRange --> FilterStatus
    SelectMonth --> FilterStatus
    SelectYear --> FilterStatus
    
    FilterStatus{Filtrar por<br/>status?} -->|Sim| SelectStatus[Selecionar status<br/>Aprovado/Pendente/etc]
    FilterStatus -->|N√£o| AdditionalFilters
    SelectStatus --> AdditionalFilters
    
    AdditionalFilters{Outros<br/>filtros?} -->|Sim| AddMoreFilters[Adicionar filtros<br/>adicionais]
    AdditionalFilters -->|N√£o| GenerateReport
    AddMoreFilters --> GenerateReport
    
    GenerateReport[Gerar relat√≥rio] --> QueryDatabase[Consultar banco<br/>de dados]
    
    QueryDatabase --> ProcessData[Processar e<br/>calcular dados]
    
    ProcessData --> CheckDataSize{Muitos<br/>registros?}
    CheckDataSize -->|Sim > 10k| ProcessBackground[Processar em<br/>background]
    CheckDataSize -->|N√£o| GenerateView
    
    ProcessBackground --> QueueJob[Adicionar √† fila<br/>de jobs]
    QueueJob --> NotifyWhenReady[Notificar usu√°rio<br/>quando pronto]
    NotifyWhenReady --> End([Aguardar processamento])
    
    GenerateView[Gerar visualiza√ß√£o] --> SelectFormat{Selecionar<br/>formato}
    
    SelectFormat -->|Visualizar Online| DisplayHTML[Exibir relat√≥rio<br/>HTML interativo]
    SelectFormat -->|Exportar PDF| GeneratePDF[Gerar arquivo PDF]
    SelectFormat -->|Exportar Excel| GenerateExcel[Gerar arquivo XLSX]
    SelectFormat -->|Exportar CSV| GenerateCSV[Gerar arquivo CSV]
    SelectFormat -->|Exportar JSON| GenerateJSON[Gerar arquivo JSON]
    
    DisplayHTML --> AddCharts[Adicionar gr√°ficos<br/>interativos]
    AddCharts --> AddFiltersUI[Adicionar filtros<br/>din√¢micos]
    AddFiltersUI --> ShowReport[Exibir relat√≥rio]
    
    GeneratePDF --> SignPDF{Assinar<br/>digitalmente?}
    SignPDF -->|Sim| ApplyICPSignature[Aplicar assinatura<br/>ICP-Brasil]
    SignPDF -->|N√£o| DownloadPDF
    ApplyICPSignature --> DownloadPDF[Download arquivo PDF]
    DownloadPDF --> ShowReport
    
    GenerateExcel --> DownloadExcel[Download arquivo<br/>XLSX]
    GenerateCSV --> DownloadCSV[Download arquivo<br/>CSV]
    GenerateJSON --> DownloadJSON[Download arquivo<br/>JSON]
    
    DownloadExcel --> ShowReport
    DownloadCSV --> ShowReport
    DownloadJSON --> ShowReport
    
    ShowReport --> ActionOptions{A√ß√£o do<br/>usu√°rio}
    
    ActionOptions -->|Imprimir| PrintReport[Imprimir relat√≥rio]
    ActionOptions -->|Compartilhar| ShareReport[Compartilhar via<br/>e-mail/link]
    ActionOptions -->|Salvar| SaveReport[Salvar como<br/>favorito]
    ActionOptions -->|Agendar| ScheduleReport[Agendar envio<br/>peri√≥dico]
    ActionOptions -->|Voltar| SelectReportType
    
    PrintReport --> End([Finalizar])
    ShareReport --> End
    SaveReport --> End
    ScheduleReport --> End
```

### 2.9 Fluxograma - Sistema de Advert√™ncias

```mermaid
graph TB
    Start([Gestor/Admin inicia<br/>advert√™ncia]) --> SelectEmployee[Selecionar<br/>funcion√°rio]
    
    SelectEmployee --> SelectType{Tipo de<br/>advert√™ncia}
    
    SelectType -->|Verbal| VerbalWarning[Advert√™ncia Verbal]
    SelectType -->|Escrita| WrittenWarning[Advert√™ncia Escrita]
    SelectType -->|Suspens√£o| SuspensionWarning[Suspens√£o]
    
    VerbalWarning --> FillForm[Preencher formul√°rio<br/>de advert√™ncia]
    WrittenWarning --> FillForm
    SuspensionWarning --> FillForm
    
    FillForm --> EnterReason[Descrever motivo<br/>da advert√™ncia]
    EnterReason --> EnterDate[Selecionar data<br/>da ocorr√™ncia]
    EnterDate --> AttachEvidence{Anexar<br/>evid√™ncias?}
    
    AttachEvidence -->|Sim| UploadEvidence[Upload de arquivos<br/>comprobat√≥rios]
    AttachEvidence -->|N√£o| GenerateDocument
    UploadEvidence --> GenerateDocument
    
    GenerateDocument[Gerar documento<br/>de advert√™ncia] --> IncludeICPSignature[Incluir assinatura<br/>digital do emissor]
    
    IncludeICPSignature --> NotifyEmployee[Notificar funcion√°rio<br/>via sistema]
    
    NotifyEmployee --> WaitSignature[Aguardar assinatura<br/>do funcion√°rio]
    
    WaitSignature --> CheckSignature{Funcion√°rio<br/>assinou?}
    
    CheckSignature -->|N√£o ap√≥s 48h| RegisterRecusal[Registrar recusa<br/>de assinatura]
    RegisterRecusal --> AddWitness[Adicionar testemunha<br/>da recusa]
    AddWitness --> SaveWithoutSignature
    
    CheckSignature -->|Sim| ValidateSignature[Validar assinatura<br/>digital]
    
    ValidateSignature --> ValidSignature{Assinatura<br/>v√°lida?}
    ValidSignature -->|N√£o| ErrorSignature[Erro: Assinatura<br/>inv√°lida]
    ErrorSignature --> WaitSignature
    
    ValidSignature -->|Sim| SaveWithSignature[Salvar advert√™ncia<br/>com assinatura]
    
    SaveWithSignature --> GeneratePDF
    SaveWithoutSignature[Salvar advert√™ncia<br/>sem assinatura] --> GeneratePDF
    
    GeneratePDF[Gerar PDF final<br/>com ICP-Brasil] --> StoreDocument[Armazenar documento<br/>criptografado]
    
    StoreDocument --> UpdateEmployeeRecord[Atualizar hist√≥rico<br/>do funcion√°rio]
    
    UpdateEmployeeRecord --> CheckCount{N√∫mero de<br/>advert√™ncias?}
    
    CheckCount -->|>= 3| TriggerDismissal[Acionar processo<br/>de demiss√£o]
    CheckCount -->|< 3| SendConfirmation[Enviar confirma√ß√£o<br/>para gestor e funcion√°rio]
    
    TriggerDismissal --> NotifyHR[Notificar RH para<br/>procedimentos]
    NotifyHR --> SendConfirmation
    
    SendConfirmation --> AuditLog[Registrar em<br/>audit log]
    
    AuditLog --> End([Finalizar])
```

---

## 3. ESTRUTURA DO PROJETO

### 3.1 Estrutura de Diret√≥rios Completa

```
ponto-eletronico/
‚îú‚îÄ‚îÄ .env                          # Configura√ß√µes de ambiente
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ composer.json
‚îú‚îÄ‚îÄ composer.lock
‚îú‚îÄ‚îÄ README.md
‚îÇ
‚îú‚îÄ‚îÄ public/                       # Document root
‚îÇ   ‚îú‚îÄ‚îÄ index.php                 # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ .htaccess
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.min.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ leaflet.css
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ custom.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bootstrap.bundle.min.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ leaflet.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ qrcode.min.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ socket.io.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ images/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ logo.png
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ icons/
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Database.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Routes.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Validation.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Filters.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ICP.php              # Configura√ß√µes certificado ICP
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BaseController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RegisterController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LogoutController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminDashboardController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ManagerDashboardController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EmployeeDashboardController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Timesheet/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TimePunchController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TimesheetController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ JustificationController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Employee/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EmployeeController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Biometric/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FaceRecognitionController.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FingerprintController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Geolocation/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GeofenceController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Report/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ReportController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Chat/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ChatController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Warning/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WarningController.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Setting/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SettingController.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Api/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ApiController.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EmployeeModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TimePunchModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TimesheetModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ JustificationModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BiometricTemplateModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GeofenceModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChatMessageModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WarningModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserConsentModel.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuditLogModel.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NotificationModel.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthService.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Biometric/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CompreFaceService.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SourceAFISService.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Geolocation/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LeafletService.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NominatimService.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ICP/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ICPSignatureService.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NSRGeneratorService.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Notification/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EmailService.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PushService.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SMSService.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Report/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PDFService.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExcelService.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CSVService.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Queue/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ QueueService.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WebSocket/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WebSocketService.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LGPD/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ConsentService.php
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DataExportService.php
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ DataAnonymizationService.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Filters/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthFilter.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminFilter.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ManagerFilter.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CorsFilter.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Libraries/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ QRCode/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ QRCodeGenerator.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Encryption/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BiometricEncryption.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Validation/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CPFValidator.php
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Views/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layouts/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ header.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ footer.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manager.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ employee.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ timesheet/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ punch.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ history.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ justification.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ employee/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ list.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ edit.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ biometric/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enroll_face.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ enroll_fingerprint.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ report/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ view.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ warning/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ view.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.php
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Database/
‚îÇ       ‚îú‚îÄ‚îÄ Migrations/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000001_create_employees_table.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000002_create_time_punches_table.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000003_create_biometric_templates_table.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000004_create_justifications_table.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000005_create_geofences_table.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000006_create_chat_messages_table.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000007_create_warnings_table.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000008_create_user_consents_table.php
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 2024_01_01_000009_create_audit_logs_table.php
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ 2024_01_01_000010_create_notifications_table.php
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ Seeds/
‚îÇ           ‚îú‚îÄ‚îÄ AdminUserSeeder.php
‚îÇ           ‚îî‚îÄ‚îÄ SettingsSeeder.php
‚îÇ
‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îú‚îÄ‚îÄ cache/
‚îÇ   ‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îú‚îÄ‚îÄ uploads/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ justifications/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ warnings/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ temp/
‚îÇ   ‚îî‚îÄ‚îÄ keys/
‚îÇ       ‚îú‚îÄ‚îÄ biometric.key          # Chave para criptografia biom√©trica
‚îÇ       ‚îî‚îÄ‚îÄ icp/
‚îÇ           ‚îú‚îÄ‚îÄ certificate.pem    # Certificado ICP-Brasil
‚îÇ           ‚îî‚îÄ‚îÄ private.key        # Chave privada ICP
‚îÇ
‚îú‚îÄ‚îÄ vendor/                         # Depend√™ncias Composer
‚îÇ
‚îú‚îÄ‚îÄ docker/                         # Configura√ß√µes Docker
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ default.conf
‚îÇ   ‚îú‚îÄ‚îÄ php/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ compreface/
‚îÇ       ‚îî‚îÄ‚îÄ docker-compose.yml
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ install.sh                 # Script de instala√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ worker.php                 # Worker para processar filas
‚îÇ   ‚îú‚îÄ‚îÄ cron_calculate.php         # Cron para c√°lculo de jornada
‚îÇ   ‚îî‚îÄ‚îÄ backup.sh                  # Script de backup
‚îÇ
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ unit/
    ‚îú‚îÄ‚îÄ integration/
    ‚îî‚îÄ‚îÄ e2e/
```

---

## 4. COMANDOS CLAUDE CODE POR FASE

### 4.1 FASE 1: Setup Inicial (Semana 1-2)

**Comando 1: Criar estrutura base do projeto**

```bash
claude code "Crie a estrutura completa do projeto de ponto eletr√¥nico seguindo exatamente a estrutura de diret√≥rios especificada no plano. Use CodeIgniter 4 como framework. Configure composer.json com todas as depend√™ncias necess√°rias: codeigniter4/shield para autentica√ß√£o, phpoffice/phpspreadsheet para Excel, tecnickcom/tcpdf para PDF, guzzlehttp/guzzle para HTTP requests. Crie todos os diret√≥rios e arquivos base necess√°rios."
```

**Comando 2: Configurar banco de dados e migrations**

```bash
claude code "Configure o sistema de migrations do CodeIgniter 4. Crie todas as 10 migrations listadas na estrutura do projeto. Cada migration deve seguir as melhores pr√°ticas: tipos de dados adequados, √≠ndices para performance, foreign keys com cascade, campos created_at/updated_at, coment√°rios explicativos. As tabelas s√£o: employees, time_punches, biometric_templates, justifications, geofences, chat_messages, warnings, user_consents, audit_logs, notifications."
```

**Comando 3: Criar seeders para dados iniciais**

```bash
claude code "Crie seeders para popular o banco de dados com dados iniciais. AdminUserSeeder deve criar um usu√°rio administrador com senha hash Argon2id, e-mail admin@sistema.com, CPF v√°lido. SettingsSeeder deve criar configura√ß√µes padr√£o do sistema: hor√°rios de expediente (08:00-18:00), intervalos obrigat√≥rios, raio da cerca virtual (100m), limites de upload de arquivo (5MB), configura√ß√µes de notifica√ß√£o."
```

### 4.2 FASE 2: Autentica√ß√£o e Perfis (Semana 3-4)

**Comando 4: Implementar sistema de autentica√ß√£o**

```bash
claude code "Implemente o sistema completo de autentica√ß√£o usando CodeIgniter 4 Shield. Crie LoginController com valida√ß√£o de credenciais, prote√ß√£o contra brute force (rate limiting), hash Argon2id para senhas. Crie RegisterController com valida√ß√£o de CPF, e-mail √∫nico, for√ßa de senha. Implemente tr√™s perfis: Admin (acesso total), Gestor (gerenciar equipe), Funcion√°rio (acesso limitado). Crie filtros de autoriza√ß√£o (AuthFilter, AdminFilter, ManagerFilter) para proteger rotas."
```

**Comando 5: Criar dashboards espec√≠ficos por perfil**

```bash
claude code "Crie tr√™s dashboards distintos: AdminDashboard (estat√≠sticas globais, gr√°ficos de presen√ßa, alertas do sistema, acesso r√°pido a configura√ß√µes), ManagerDashboard (estat√≠sticas da equipe, pend√™ncias de aprova√ß√£o, calend√°rio de equipe, atalhos para justificativas), EmployeeDashboard (bot√£o destaque para bater ponto, resumo de horas do m√™s, √∫ltimas marca√ß√µes, banco de horas atual). Use Bootstrap 5 para UI responsiva. Implemente gr√°ficos com Chart.js."
```

### 4.3 FASE 3: Registro de Ponto Core (Semana 5-6)

**Comando 6: Implementar registro de ponto b√°sico**

```bash
claude code "Implemente TimePunchController com os seguintes m√©todos: 1) index() - tela de registro com bot√£o grande, 2) punch() - processar registro com valida√ß√£o de hor√°rio permitido, detec√ß√£o de tipo (entrada/sa√≠da/intervalo) baseado no √∫ltimo registro, gera√ß√£o de NSR sequencial √∫nico, gera√ß√£o de hash SHA-256 da marca√ß√£o, salvamento no banco. Implemente TimePunchModel com m√©todos: getLastPunch(), generateNSR(), calculateHash(). Adicione valida√ß√£o: n√£o permitir marca√ß√µes com menos de 1 minuto de diferen√ßa, bloquear fora do hor√°rio de expediente configurado."
```

**Comando 7: Adicionar gera√ß√£o de comprovante eletr√¥nico**

```bash
claude code "Implemente gera√ß√£o de comprovante eletr√¥nico de ponto conforme Portaria 671/2021. Use TCPDF para gerar PDF com: cabe√ßalho com logo e dados da empresa (CNPJ), dados do funcion√°rio (nome completo, CPF), data e hora da marca√ß√£o, NSR (N√∫mero Sequencial de Registro), tipo de marca√ß√£o (entrada/sa√≠da), hash SHA-256, QR Code contendo NSR+hash para valida√ß√£o, rodap√© com n√∫mero de registro INPI e assinatura digital ICP-Brasil (se dispon√≠vel). O PDF deve ser salvo em storage/receipts/ e link enviado por e-mail."
```

### 4.4 FASE 4: Registro de Ponto por C√≥digo e QR (Semana 7)

**Comando 8: Implementar registro por c√≥digo √∫nico**

```bash
claude code "Adicione m√©todo de registro por c√≥digo √∫nico. Cada funcion√°rio deve ter um c√≥digo alfanum√©rico de 8 caracteres gerado automaticamente no cadastro (use random_bytes + base64 encode). Crie m√©todo validateCode() em TimePunchController que verifica se o c√≥digo existe e pertence a um funcion√°rio ativo. Implemente interface de entrada de c√≥digo: input de 8 d√≠gitos, m√°scara autom√°tica, valida√ß√£o em tempo real via AJAX, feedback visual (verde para v√°lido, vermelho para inv√°lido), bot√£o de confirmar habilitado apenas quando v√°lido."
```

**Comando 9: Implementar registro por QR Code**

```bash
claude code "Implemente sistema de QR Code usando biblioteca chillerlan/php-qrcode. Cada funcion√°rio deve ter um QR Code √∫nico gerado e armazenado. O QR deve conter JSON: {employee_id, code, timestamp, signature}. Signature √© HMAC-SHA256 usando chave secreta do sistema. Crie p√°gina de gera√ß√£o de QR para cada funcion√°rio (acess√≠vel no perfil). Implemente leitor de QR Code no frontend usando biblioteca html5-qrcode. Valide a assinatura do QR antes de aceitar o registro. QR Code deve expirar ap√≥s 5 minutos da gera√ß√£o para seguran√ßa."
```

### 4.5 FASE 5: Integra√ß√£o CompreFace (Semana 8-9)

**Comando 10: Setup CompreFace via Docker**

```bash
claude code "Crie configura√ß√£o Docker Compose para CompreFace em docker/compreface/docker-compose.yml. Configure servi√ßos: compreface-postgres-db, compreface-admin, compreface-api, compreface-fe. Use vers√£o mais recente est√°vel. Configure vari√°veis de ambiente: POSTGRES_PASSWORD, POSTGRES_USER, API_JAVA_OPTS=-Xmx8g. Configure volumes para persist√™ncia de dados. Adicione healthcheck para cada servi√ßo. Exponha porta 8000 para API. Crie script de inicializa√ß√£o que: 1) sobe containers, 2) aguarda healthcheck, 3) cria API key via curl, 4) salva key no .env do projeto principal."
```

**Comando 11: Criar servi√ßo de integra√ß√£o CompreFace**

```bash
claude code "Crie CompreFaceService.php com m√©todos: 1) enrollFace($employeeId, $photoPaths) - recebe array com 3 fotos (frente, direita, esquerda), envia para CompreFace API /api/v1/recognition/faces com subject=employee_id, retorna subject_id. 2) recognizeFace($photoPath) - envia foto para /api/v1/recognition/recognize, retorna array com subject e similarity score. 3) deleteFace($employeeId) - remove subject do CompreFace. 4) verifyFace($photoPath, $employeeId) - verifica se foto corresponde ao employee_id espec√≠fico. Use Guzzle para requests HTTP. Implemente retry autom√°tico (3 tentativas) em caso de falha. Logue todas as requisi√ß√µes para audit."
```

**Comando 12: Implementar cadastro de reconhecimento facial**

```bash
claude code "Crie FaceRecognitionController com m√©todo enroll(). Implemente interface web para cadastro: 1) Instru√ß√µes claras (boa ilumina√ß√£o, remover √≥culos, fundo neutro). 2) Captura de 3 fotos usando getUserMedia API do navegador. 3) Preview de cada foto antes de confirmar. 4) Valida√ß√£o de qualidade (detectar se h√° rosto na foto usando API do navegador). 5) Upload das 3 fotos para servidor. 6) Servidor envia para CompreFace via CompreFaceService. 7) Em caso de sucesso, salvar refer√™ncia em biometric_templates com template_encrypted vazio (CompreFace gerencia os dados). 8) Solicitar consentimento LGPD antes de iniciar (checkbox obrigat√≥rio). 9) Feedback de progresso durante processo."
```

**Comando 13: Implementar registro de ponto por reconhecimento facial**

```bash
claude code "Adicione m√©todo punchByFace() em TimePunchController. Fluxo: 1) Capturar foto do funcion√°rio via webcam (getUserMedia). 2) Enviar foto para servidor via AJAX. 3) Servidor chama CompreFaceService->recognizeFace(). 4) Se similarity >= 0.80 (80%), aceitar reconhecimento. 5) Buscar employee_id pelo subject retornado. 6) Processar registro de ponto normalmente. 7) Salvar similarity score no campo face_similarity de time_punches. 8) Se similarity < 0.80, retornar erro com mensagem amig√°vel. 9) Implementar rate limiting: m√°ximo 5 tentativas por minuto por IP. 10) Adicionar loading spinner durante processamento (reconhecimento pode levar 2-3 segundos)."
```

### 4.6 FASE 6: Geolocaliza√ß√£o (Semana 10)

**Comando 14: Implementar captura de geolocaliza√ß√£o**

```bash
claude code "Implemente sistema de geolocaliza√ß√£o usando HTML5 Geolocation API. Crie arquivo geolocator.js que: 1) Solicita permiss√£o de localiza√ß√£o ao usu√°rio. 2) Usa navigator.geolocation.getCurrentPosition() com enableHighAccuracy=true. 3) Captura latitude, longitude e accuracy. 4) Em caso de erro (permiss√£o negada ou timeout), exibe mensagem clara. 5) Envia coordenadas via AJAX junto com cada registro de ponto. No backend, adicione campos location_lat, location_lng, location_accuracy na tabela time_punches. Salve coordenadas a cada registro. Adicione valida√ß√£o: se accuracy > 100 metros, avisar usu√°rio que precis√£o √© baixa."
```

**Comando 15: Implementar cerca virtual (geofencing)**

```bash
claude code "Implemente sistema de cerca virtual. Crie GeofenceModel com campos: name, center_lat, center_lng, radius_meters, active. Crie GeofenceController com CRUD de cercas. Implemente m√©todo checkGeofence($lat, $lng) que: 1) Busca cercas ativas do banco. 2) Para cada cerca, calcula dist√¢ncia usando f√≥rmula de Haversine. 3) Retorna true se est√° dentro de alguma cerca. No TimePunchController, antes de salvar registro: 1) Verifica se est√° dentro da cerca. 2) Salva resultado no campo within_geofence. 3) Se est√° fora, exibe aviso mas permite registro (com flag). Administradores podem configurar m√∫ltiplas cercas (matriz, filiais)."
```

**Comando 16: Criar interface de mapa com Leaflet**

```bash
claude code "Implemente visualiza√ß√£o de mapa usando Leaflet.js. Crie p√°gina geofence/map.php que: 1) Carrega mapa centrado nas coordenadas da empresa. 2) Usa tiles do OpenStreetMap (https://tile.openstreetmap.org/{z}/{x}/{y}.png). 3) Desenha c√≠rculo azul representando cada cerca virtual. 4) Permite admin clicar no mapa para definir centro de nova cerca. 5) Slider para ajustar raio (50-500 metros). 6) Mostra preview em tempo real. 7) Bot√£o para salvar cerca. 8) Lista de cercas existentes com op√ß√£o de editar/excluir. 9) Exibe marca√ß√µes de ponto dos √∫ltimos 7 dias como pins no mapa (verde=dentro, vermelho=fora da cerca)."
```

### 4.7 FASE 7: Justificativas (Semana 11)

**Comando 17: Implementar sistema de justificativas**

```bash
claude code "Crie JustificationController e JustificationModel. Implemente CRUD completo: 1) create() - formul√°rio com campos: tipo (falta/atraso/sa√≠da antecipada), data, motivo (textarea 500 chars), categoria (doen√ßa/compromisso pessoal/emerg√™ncia/outro). 2) Permitir upload de at√© 3 arquivos (PDF, JPG, PNG, max 5MB cada). 3) Salvar arquivos em storage/uploads/justifications/employee_id/. 4) Status inicial: 'pendente' se funcion√°rio, 'aprovado' se gestor. 5) list() - listar justificativas do usu√°rio logado (funcion√°rio) ou da equipe (gestor). 6) approve() - gestor pode aprovar/rejeitar com coment√°rio. 7) Implementar notifica√ß√µes: email ao criar, email ao aprovar/rejeitar. 8) Registrar todas a√ß√µes em audit_logs."
```

### 4.8 FASE 8: C√°lculo de Folha de Ponto (Semana 12)

**Comando 18: Criar worker de c√°lculo di√°rio**

```bash
claude code "Crie scripts/cron_calculate.php que roda diariamente via cron. Algoritmo: 1) Buscar todos funcion√°rios ativos. 2) Para cada um, buscar marca√ß√µes do dia anterior. 3) Validar se marca√ß√µes est√£o pareadas (entrada-sa√≠da). 4) Calcular total de horas: somar (sa√≠da - entrada) - intervalos. 5) Buscar jornada esperada da configura√ß√£o do funcion√°rio. 6) Calcular diferen√ßa: trabalhado - esperado. 7) Se positivo, adicionar a campo extra_hours_balance. 8) Se negativo e sem justificativa, adicionar a campo owed_hours_balance. 9) Validar intervalos obrigat√≥rios (1h para >6h, 15min para 4-6h). 10) Se intervalo violado, calcular pagamento adicional (50% sobre o tempo de intervalo). 11) Salvar registro consolidado do dia em timesheet_consolidated. 12) Enviar relat√≥rio di√°rio por e-mail para o funcion√°rio."
```

**Comando 19: Criar dashboard de saldo de horas**

```bash
claude code "Crie p√°gina timesheet/balance.php que exibe: 1) Card com saldo atual de horas (positivo=verde, negativo=vermelho). 2) Gr√°fico de linha mostrando evolu√ß√£o do saldo nos √∫ltimos 30 dias. 3) Tabela com detalhamento di√°rio: data, horas trabalhadas, horas esperadas, diferen√ßa, justificativas. 4) Filtros: per√≠odo (√∫ltima semana/m√™s/ano/custom). 5) Bot√£o para exportar para PDF/Excel. 6) Alertas visuais: se saldo negativo > 10 horas, exibir warning. 7) Link para solicitar compensa√ß√£o de horas. Gestor pode ver saldo de toda equipe em tabela comparativa."
```

### 4.9 FASE 9: Relat√≥rios (Semana 13-14)

**Comando 20: Implementar gera√ß√£o de relat√≥rios**

```bash
claude code "Crie ReportController com m√©todos: 1) index() - p√°gina com lista de tipos de relat√≥rios e formul√°rio de filtros. 2) generate() - processa filtros e chama gerador apropriado. 3) Tipos de relat√≥rios: folha_ponto (detalhamento de todas marca√ß√µes), horas_extras (consolidado de horas positivas), faltas_atrasos (lista de aus√™ncias), banco_horas (saldo acumulado), consolidado_mensal (resumo executivo). 4) Filtros: employee_id, department_id, date_from, date_to, status. 5) Formatos de sa√≠da: HTML (view), PDF (TCPDF), Excel (PhpSpreadsheet), CSV. 6) Para relat√≥rios grandes (>10k linhas), processar em background via queue. 7) Implementar cache de 1 hora para relat√≥rios id√™nticos."
```

**Comando 21: Criar servi√ßos de exporta√ß√£o**

```bash
claude code "Crie tr√™s servi√ßos: 1) PDFService->generateReport($type, $data) - usa TCPDF, adiciona cabe√ßalho/rodap√© customizados, tabelas formatadas, assinatura ICP-Brasil no PDF. 2) ExcelService->generateReport($type, $data) - usa PhpSpreadsheet, m√∫ltiplas abas (sum√°rio + detalhes), formata√ß√£o condicional (cores para positivo/negativo), f√≥rmulas autom√°ticas, gr√°ficos incorporados. 3) CSVService->generateReport($type, $data) - formato simples com delimiter ponto-v√≠rgula, encoding UTF-8 com BOM para Excel. Todos devem implementar interface ReportGeneratorInterface. Adicionar m√©todo de assinatura digital ICP no PDF usando OpenSSL e certificado configurado."
```

### 4.10 FASE 10: Chat Interno (Semana 15)

**Comando 22: Implementar chat com WebSocket**

```bash
claude code "Crie WebSocketService usando biblioteca workerman/workerman. Configure servidor WebSocket na porta 8080. Implemente: 1) Autentica√ß√£o de conex√£o via token JWT. 2) Salas por conversa (user_1_user_2). 3) Broadcast de mensagens apenas para participantes. 4) Eventos: user_connected, user_disconnected, message_sent, message_read, user_typing. 5) Persist√™ncia: salvar todas mensagens em chat_messages. 6) Hist√≥rico: ao conectar, enviar √∫ltimas 50 mensagens. 7) Status online/offline de usu√°rios. 8) Fallback para polling se WebSocket n√£o funcionar. Crie script daemon: scripts/websocket_server.php para rodar continuamente."
```

**Comando 23: Criar interface de chat**

```bash
claude code "Crie views/chat/index.php com interface moderna: 1) Sidebar esquerda: lista de contatos com foto, nome, √∫ltimo status (online/offline), √∫ltima mensagem. 2) √Årea central: hist√≥rico de mensagens com scroll autom√°tico, mensagens do usu√°rio √† direita (azul), do contato √† esquerda (cinza). 3) Input inferior: campo de texto com bot√£o enviar, bot√£o de emoji picker, bot√£o de anexo. 4) Indicador de 'digitando...' quando contato est√° digitando. 5) Timestamps nas mensagens. 6) Confirma√ß√£o de leitura (check duplo). 7) Busca de mensagens. 8) Notifica√ß√£o sonora ao receber mensagem. JavaScript: conectar WebSocket, escutar eventos, atualizar UI em tempo real."
```

### 4.11 FASE 11: Advert√™ncias (Semana 16)

**Comando 24: Sistema de advert√™ncias eletr√¥nicas**

```bash
claude code "Crie WarningModel e WarningController. Implemente: 1) create() - formul√°rio para gestor/admin criar advert√™ncia: tipo (verbal/escrita/suspens√£o), funcion√°rio, data, motivo detalhado, evid√™ncias (upload opcional). 2) Gerar documento PDF com: dados da empresa, dados do funcion√°rio, tipo e motivo da advert√™ncia, data, assinatura digital do emissor (ICP-Brasil). 3) Notificar funcion√°rio via e-mail e sistema. 4) Funcion√°rio deve assinar digitalmente o documento (usando certificado pr√≥prio ou assinatura simplificada via c√≥digo SMS). 5) Prazo de 48h para assinar. Se n√£o assinar, registrar recusa e adicionar assinatura de testemunha. 6) Ap√≥s assinatura, gerar PDF final com ambas assinaturas. 7) Armazenar criptografado. 8) Se funcion√°rio atingir 3 advert√™ncias, acionar alerta autom√°tico para RH. Dashboard de advert√™ncias mostra hist√≥rico completo com linha do tempo."
```

### 4.12 FASE 12: LGPD e Conformidade (Semana 17)

**Comando 25: Implementar gest√£o de consentimentos**

```bash
claude code "Crie ConsentService e UserConsentModel. Implementar: 1) Portal de consentimentos onde funcion√°rio v√™ todos os consentimentos solicitados: biometria facial, biometria digital, geolocaliza√ß√£o, processamento de dados. 2) Para cada consentimento: finalidade detalhada, base legal (LGPD Art. X), data de solicita√ß√£o. 3) Funcion√°rio pode conceder ou revogar a qualquer momento. 4) Ao revogar: 1) Marcar revoked_at, 2) Anonimizar/deletar dados biom√©tricos relacionados, 3) Desabilitar funcionalidades dependentes. 5) Registrar todas a√ß√µes em audit_logs com IP e user agent. 6) Gerar relat√≥rio de consentimentos para autoridade (ANPD) se solicitado."
```

**Comando 26: Criar ferramentas de portabilidade de dados**

```bash
claude code "Crie DataExportService com m√©todo exportUserData($userId). Implementar: 1) Coletar todos dados do usu√°rio: perfil, marca√ß√µes de ponto, justificativas, mensagens de chat, advert√™ncias, configura√ß√µes. 2) Gerar arquivo JSON estruturado seguindo padr√£o JSON-LD. 3) Incluir metadados: data de gera√ß√£o, vers√£o do sistema, finalidade. 4) Para dados sens√≠veis (biom√©tricos), gerar hash ao inv√©s do dado raw. 5) Comprimir arquivo em ZIP. 6) Proteger ZIP com senha (enviar por canal separado). 7) Disponibilizar para download com link expir√°vel (24h). 8) Op√ß√£o de enviar por e-mail criptografado. 9) Registrar exporta√ß√£o em audit log. Prazo: at√© 15 dias da solicita√ß√£o (LGPD Art. 19)."
```

**Comando 27: Sistema de auditoria e logs**

```bash
claude code "Implemente sistema robusto de audit logs. AuditLogModel deve registrar: 1) user_id (quem fez), 2) action (o que fez: CREATE/UPDATE/DELETE/VIEW/EXPORT), 3) entity_type (qual tabela), 4) entity_id (qual registro), 5) old_values (JSON do antes), 6) new_values (JSON do depois), 7) ip_address, 8) user_agent, 9) created_at. Crie trait Auditable que pode ser adicionado a qualquer Model para auto-logging. Implemente m√©todo afterInsert(), afterUpdate(), afterDelete() que dispara logs. Crie dashboard de auditoria para admin: filtros por usu√°rio, a√ß√£o, per√≠odo. Timeline visual das a√ß√µes. Alertas para a√ß√µes suspeitas (ex: 100+ a√ß√µes em 1 minuto). Exportar logs para an√°lise externa. Reten√ß√£o: 10 anos (conformidade fiscal)."
```

### 4.13 FASE 13: Configura√ß√µes e Integra√ß√µes (Semana 18)

**Comando 28: Painel de configura√ß√µes administrativas**

```bash
claude code "Crie SettingController com interface administrativa completa. Se√ß√µes: 1) Geral: nome da empresa, CNPJ, logo, cores do tema. 2) Jornada: hor√°rios padr√£o de expediente, intervalos obrigat√≥rios, flexibilidade de hor√°rio (minutos de toler√¢ncia). 3) Geolocaliza√ß√£o: gerenciar cercas virtuais, ativar/desativar obrigatoriedade. 4) Notifica√ß√µes: configurar lembretes de ponto (X minutos antes do hor√°rio), templates de e-mail, habilitar push/SMS. 5) Biometria: configurar URL do CompreFace, API key, threshold de similaridade (0.70-0.95). 6) APIs: configurar Nominatim endpoint, rate limits, cache de geocoding. 7) ICP-Brasil: upload de certificado .pfx, senha, validade. 8) LGPD: DPO respons√°vel, e-mail de contato, pol√≠ticas de reten√ß√£o. 9) Backup: configurar S3/FTP para backups autom√°ticos. Validar cada configura√ß√£o antes de salvar. Armazenar em tabela settings com key-value criptografados."
```

**Comando 29: Dashboard administrativo completo**

```bash
claude code "Crie dashboard administrativo rico em informa√ß√µes. Widgets: 1) Card de resumo: total de funcion√°rios ativos, marca√ß√µes de hoje, pend√™ncias. 2) Gr√°fico de linha: evolu√ß√£o de marca√ß√µes nos √∫ltimos 30 dias. 3) Gr√°fico de pizza: distribui√ß√£o por departamento. 4) Mapa de calor: hor√°rios de maior movimento. 5) Lista de alertas: jornadas incompletas hoje, saldos negativos cr√≠ticos (>20h), consentimentos LGPD pendentes, certificados ICP expirando em 30 dias. 6) Atividade recente: √∫ltimas 10 a√ß√µes do sistema (logs). 7) Atalhos r√°pidos: cadastrar funcion√°rio, gerar relat√≥rio, configura√ß√µes. 8) Status dos servi√ßos: MySQL (verde/vermelho), CompreFace (verde/vermelho), WebSocket (verde/vermelho). Atualizar cards via AJAX a cada 30 segundos. Design responsivo com Bootstrap 5."
```

### 4.14 FASE 14: Testes e Refinamentos (Semana 19-20)

**Comando 30: Criar suite de testes automatizados**

```bash
claude code "Implemente suite completa de testes usando PHPUnit. Testes unit√°rios: 1) AuthServiceTest: testar login v√°lido/inv√°lido, hash de senha. 2) TimePunchModelTest: testar c√°lculo de horas, valida√ß√£o de pareamento. 3) GeofenceServiceTest: testar c√°lculo de dist√¢ncia Haversine. 4) ConsentServiceTest: testar concess√£o/revoga√ß√£o. Testes de integra√ß√£o: 1) TimePunchFlowTest: simular fluxo completo de registro de ponto. 2) JustificationFlowTest: criar, aprovar, rejeitar justificativa. 3) ReportGenerationTest: gerar relat√≥rios em todos formatos. Testes E2E com Selenium: 1) LoginE2ETest: abrir navegador, fazer login, verificar dashboard. 2) PunchE2ETest: fazer registro de ponto pela interface. Mock CompreFace API para testes. Coverage target: >80%."
```

**Comando 31: Otimiza√ß√µes de performance**

```bash
claude code "Implemente otimiza√ß√µes cr√≠ticas: 1) Indexa√ß√£o de banco: adicionar √≠ndices compostos em queries frequentes (employee_id+punch_time em time_punches). 2) Eager loading: usar joins para evitar N+1 queries. 3) Cache de configura√ß√µes: carregar settings uma vez e cachear por 1 hora. 4) Pagination: implementar pagina√ß√£o em todas listagens (50 itens por p√°gina). 5) Lazy loading de imagens: usar Intersection Observer. 6) Minificar CSS/JS: webpack para bundle e minify. 7) Compress√£o Gzip: ativar no .htaccess. 8) OPcache: configurar PHP opcache.enable=1. 9) Query caching: cache MySQL para queries de relat√≥rios. 10) CDN: carregar Bootstrap/jQuery de CDN. Medir performance com Chrome DevTools. Target: Time to Interactive < 3s."
```

**Comando 32: Documenta√ß√£o e deployment**

```bash
claude code "Crie documenta√ß√£o completa: 1) README.md: introdu√ß√£o, features, requisitos, instala√ß√£o, configura√ß√£o, uso. 2) INSTALL.md: guia passo a passo de instala√ß√£o em VPS Ubuntu, instala√ß√£o via Composer, configura√ß√£o .env, migrations, seeders, permiss√µes de diret√≥rios, setup de cron jobs, iniciar WebSocket server. 3) API.md: documenta√ß√£o de todas rotas, m√©todos, par√¢metros, exemplos de request/response. 4) LGPD.md: conformidade, bases legais, direitos dos titulares, procedimentos de resposta a solicita√ß√µes. 5) TROUBLESHOOTING.md: problemas comuns e solu√ß√µes. 6) CHANGELOG.md: hist√≥rico de vers√µes. Crie script deploy.sh automatizado: pull do Git, composer install, run migrations, clear cache, restart services. Configurar CI/CD com GitHub Actions: rodar testes automaticamente em cada push."
```

---

## 5. PROMPTS DETALHADOS

### 5.1 Prompt para Desenvolvimento Full-Stack

```
Voc√™ √© um desenvolvedor full-stack especialista criando um sistema de ponto eletr√¥nico para empresas brasileiras. 

CONTEXTO:
- Framework: CodeIgniter 4
- Conformidade: Portaria MTE 671/2021, CLT, LGPD
- Stack: PHP 8.1+, MySQL 8.0+, JavaScript ES6+, Bootstrap 5
- Arquitetura: MVC, RESTful API, WebSocket para chat
- Integra√ß√µes: CompreFace (facial), SourceAFIS (fingerprint), OpenStreetMap

DIRETRIZES DE C√ìDIGO:
1. Seguran√ßa:
   - Usar prepared statements (SEMPRE)
   - Escapar output com htmlspecialchars()
   - Validar e sanitizar TODOS inputs
   - Implementar CSRF tokens
   - Hash senhas com PASSWORD_ARGON2ID
   - Criptografar dados biom√©tricos com Sodium

2. Performance:
   - Usar √≠ndices em queries frequentes
   - Eager loading para evitar N+1
   - Cache de configura√ß√µes (1h)
   - Pagination em listagens
   - Lazy loading de imagens

3. LGPD:
   - Registrar consentimentos com timestamp
   - Permitir revoga√ß√£o a qualquer momento
   - Implementar exporta√ß√£o de dados (JSON)
   - Anonimizar ao deletar usu√°rio
   - Audit log de TODAS a√ß√µes sens√≠veis

4. C√≥digo Limpo:
   - Nomes descritivos de vari√°veis/fun√ß√µes
   - Coment√°rios em l√≥gicas complexas
   - Maximum 200 linhas por m√©todo
   - PSR-12 coding standard
   - Type hints em PHP 8.1+

5. Testes:
   - Unit tests para l√≥gica de neg√≥cio
   - Integration tests para fluxos
   - Mock de APIs externas
   - Coverage m√≠nimo 80%

TAREFA:
[INSERIR TAREFA ESPEC√çFICA AQUI]

ENTREG√ÅVEIS:
- C√≥digo funcional e testado
- Coment√°rios explicativos
- Exemplo de uso
- Tratamento de erros robusto
```

### 5.2 Prompt para Debugging

```
Voc√™ √© um especialista em debugging e an√°lise de c√≥digo PHP.

SITUA√á√ÉO:
[DESCREVER O BUG/ERRO]

C√ìDIGO ATUAL:
[COLAR C√ìDIGO COM PROBLEMA]

LOGS DE ERRO:
[COLAR LOGS]

AN√ÅLISE NECESS√ÅRIA:
1. Identificar a causa raiz do problema
2. Explicar POR QUE o erro est√° ocorrendo
3. Propor solu√ß√£o(√µes) com c√≥digo corrigido
4. Sugerir testes para validar a corre√ß√£o
5. Recomendar melhorias para evitar problemas similares

FORMATO DE RESPOSTA:
## Causa Raiz
[Explica√ß√£o clara]

## Solu√ß√£o
```php
[C√≥digo corrigido]
```

## Testes
[Como testar a corre√ß√£o]

## Preven√ß√£o
[Melhores pr√°ticas para evitar este tipo de problema]
```

### 5.3 Prompt para Code Review

```
Voc√™ √© um senior developer realizando code review.

C√ìDIGO PARA REVISAR:
[COLAR C√ìDIGO]

CRIT√âRIOS DE AVALIA√á√ÉO:
1. ‚úÖ Seguran√ßa: vulnerabilidades (SQL injection, XSS, CSRF)
2. ‚úÖ Performance: queries otimizadas, √≠ndices, N+1
3. ‚úÖ LGPD: consentimentos, logs, criptografia
4. ‚úÖ Legibilidade: nomes claros, coment√°rios necess√°rios
5. ‚úÖ Reusabilidade: DRY, fun√ß√µes small e focused
6. ‚úÖ Testes: cobertura adequada
7. ‚úÖ Conformidade: Portaria 671/2021

FORMATO DE RESPOSTA:
## Pontos Fortes
[O que est√° bem feito]

## Problemas Cr√≠ticos (üî¥)
[Problemas que devem ser corrigidos antes de merge]

## Sugest√µes de Melhoria (üü°)
[Melhorias recomendadas mas n√£o bloqueantes]

## C√≥digo Refatorado (se aplic√°vel)
```php
[Vers√£o melhorada]
```

## Nota Final: X/10
```

### 5.4 Prompt para Arquitetura

```
Voc√™ √© um arquiteto de software desenhando a solu√ß√£o para:

REQUISITO:
[DESCREVER FUNCIONALIDADE]

CONSIDERA√á√ïES:
- Escalabilidade: 100-500 funcion√°rios
- Performance: response time < 500ms
- Disponibilidade: 99.9% uptime
- Seguran√ßa: LGPD compliance
- Custos: otimizar para shared hosting ou VPS modesto

AN√ÅLISE NECESS√ÅRIA:
1. Desenhar diagrama de componentes
2. Definir fluxo de dados
3. Identificar pontos cr√≠ticos
4. Propor estrat√©gias de caching
5. Definir estrutura de banco de dados
6. Sugerir tecnologias/bibliotecas
7. Estimar complexidade (horas de dev)

FORMATO DE RESPOSTA:
## Arquitetura Proposta
[Diagrama em texto ou Mermaid]

## Componentes
[Lista e responsabilidade de cada componente]

## Fluxo de Dados
[Passo a passo do fluxo]

## Banco de Dados
```sql
[Schema das tabelas]
```

## Stack Tecnol√≥gica
[Bibliotecas e justificativa]

## Estimativa
[Horas de desenvolvimento]
```

---

## 6. TESTES E VALIDA√á√ÉO

### 6.1 Checklist de Testes

**Autentica√ß√£o e Autoriza√ß√£o**
- [ ] Login com credenciais v√°lidas
- [ ] Login com credenciais inv√°lidas (3 tentativas = bloqueio)
- [ ] Registro de novo usu√°rio com valida√ß√µes
- [ ] Perfis (Admin/Gestor/Funcion√°rio) com permiss√µes corretas
- [ ] Logout e invalida√ß√£o de sess√£o
- [ ] Prote√ß√£o de rotas via filtros

**Registro de Ponto**
- [ ] Registro por c√≥digo √∫nico v√°lido
- [ ] Registro por QR Code v√°lido
- [ ] Registro por reconhecimento facial (>80% similaridade)
- [ ] Registro por biometria digital (match)
- [ ] Bloqueio fora do hor√°rio permitido
- [ ] Valida√ß√£o de intervalo m√≠nimo entre marca√ß√µes (1 min)
- [ ] Gera√ß√£o de NSR sequencial √∫nico
- [ ] Gera√ß√£o de hash SHA-256 correto
- [ ] Comprovante eletr√¥nico em PDF
- [ ] Notifica√ß√£o por e-mail

**Geolocaliza√ß√£o**
- [ ] Captura de coordenadas com precis√£o
- [ ] Valida√ß√£o de cerca virtual (dentro/fora)
- [ ] Registro permitido mesmo fora da cerca (com flag)
- [ ] Visualiza√ß√£o de mapa com Leaflet
- [ ] Cadastro de m√∫ltiplas cercas
- [ ] C√°lculo correto de dist√¢ncia Haversine

**Justificativas**
- [ ] Cria√ß√£o de justificativa de falta
- [ ] Cria√ß√£o de justificativa de atraso
- [ ] Upload de anexos (PDF, JPG, PNG)
- [ ] Valida√ß√£o de tamanho m√°ximo (5MB)
- [ ] Aprova√ß√£o por gestor
- [ ] Rejei√ß√£o por gestor com coment√°rio
- [ ] Notifica√ß√µes em cada etapa

**C√°lculo de Folha**
- [ ] C√°lculo correto de horas trabalhadas
- [ ] Identifica√ß√£o de saldo positivo (extras)
- [ ] Identifica√ß√£o de saldo negativo (d√©bito)
- [ ] Valida√ß√£o de intervalos obrigat√≥rios
- [ ] C√°lculo de pagamento por intervalo violado (50%)
- [ ] Gera√ß√£o de relat√≥rio consolidado
- [ ] Acumula√ß√£o de banco de horas

**Relat√≥rios**
- [ ] Gera√ß√£o de folha de ponto (HTML/PDF/Excel/CSV)
- [ ] Gera√ß√£o de relat√≥rio de horas extras
- [ ] Gera√ß√£o de relat√≥rio de faltas/atrasos
- [ ] Aplica√ß√£o de filtros (funcion√°rio, per√≠odo, status)
- [ ] Exporta√ß√£o em todos formatos
- [ ] Assinatura digital ICP-Brasil em PDF
- [ ] Cache de relat√≥rios (1h)

**Chat Interno**
- [ ] Conex√£o WebSocket bem-sucedida
- [ ] Envio de mensagem em tempo real
- [ ] Recebimento de mensagem em tempo real
- [ ] Hist√≥rico de mensagens (√∫ltimas 50)
- [ ] Indicador de "digitando..."
- [ ] Confirma√ß√£o de leitura (check duplo)
- [ ] Upload de arquivos (max 10MB)
- [ ] Fallback para polling se WebSocket falhar

**Advert√™ncias**
- [ ] Cria√ß√£o de advert√™ncia verbal
- [ ] Cria√ß√£o de advert√™ncia escrita
- [ ] Upload de evid√™ncias
- [ ] Gera√ß√£o de PDF com assinatura ICP
- [ ] Notifica√ß√£o ao funcion√°rio
- [ ] Assinatura eletr√¥nica do funcion√°rio
- [ ] Registro de recusa (48h sem assinatura)
- [ ] Alerta autom√°tico ao atingir 3 advert√™ncias

**LGPD**
- [ ] Solicita√ß√£o de consentimento para biometria facial
- [ ] Solicita√ß√£o de consentimento para biometria digital
- [ ] Solicita√ß√£o de consentimento para geolocaliza√ß√£o
- [ ] Revoga√ß√£o de consentimento
- [ ] Exclus√£o de dados ao revogar biometria
- [ ] Exporta√ß√£o de dados pessoais (JSON)
- [ ] Anonimiza√ß√£o ao deletar usu√°rio
- [ ] Audit log de todas a√ß√µes sens√≠veis
- [ ] Direito de acesso/corre√ß√£o/portabilidade

**Seguran√ßa**
- [ ] Prote√ß√£o contra SQL Injection
- [ ] Prote√ß√£o contra XSS
- [ ] Prote√ß√£o contra CSRF
- [ ] Rate limiting em APIs sens√≠veis
- [ ] Criptografia AES-256 para biometria
- [ ] Hash Argon2id para senhas
- [ ] Headers de seguran√ßa (HSTS, X-Frame-Options)
- [ ] Valida√ß√£o e sanitiza√ß√£o de inputs

**Performance**
- [ ] Time to Interactive < 3 segundos
- [ ] Queries com √≠ndices apropriados
- [ ] Eager loading (sem N+1)
- [ ] Cache de configura√ß√µes (1h)
- [ ] Pagination em listagens (50/p√°gina)
- [ ] Compress√£o Gzip ativada
- [ ] OPcache PHP ativado

### 6.2 Testes de Carga

```bash
# Instalar Apache Bench
sudo apt install apache2-utils

# Testar endpoint de login (100 requests, 10 concurrent)
ab -n 100 -c 10 -p login.json -T application/json https://ponto.empresa.com.br/api/auth/login

# Testar registro de ponto (1000 requests, 50 concurrent)
ab -n 1000 -c 50 -H "Authorization: Bearer TOKEN" https://ponto.empresa.com.br/api/punch

# Testar gera√ß√£o de relat√≥rio
ab -n 50 -c 5 -H "Authorization: Bearer TOKEN" https://ponto.empresa.com.br/api/reports/generate

# Target: 95% das requests < 500ms
```

### 6.3 Testes de Seguran√ßa

```bash
# OWASP ZAP - Scan de vulnerabilidades
docker run -t owasp/zap2docker-stable zap-baseline.py -t https://ponto.empresa.com.br

# SQLMap - Teste de SQL Injection
sqlmap -u "https://ponto.empresa.com.br/login" --data="email=test@test.com&password=123" --level=5 --risk=3

# Nikto - Scan de servidor web
nikto -h https://ponto.empresa.com.br

# Target: 0 vulnerabilidades cr√≠ticas ou altas
```

---

## 7. COMANDOS √öTEIS PARA DESENVOLVIMENTO

### 7.1 Setup Ambiente Local

```bash
# Clone do projeto
git clone https://github.com/empresa/ponto-eletronico.git
cd ponto-eletronico

# Instalar depend√™ncias
composer install
npm install

# Configurar .env
cp env.example .env
nano .env  # Editar DATABASE, COMPREFACE_URL, etc

# Gerar chave de aplica√ß√£o
php spark key:generate

# Criar banco de dados
mysql -u root -p -e "CREATE DATABASE ponto_eletronico CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# Rodar migrations
php spark migrate

# Rodar seeders
php spark db:seed AdminUserSeeder
php spark db:seed SettingsSeeder

# Iniciar servidor de desenvolvimento
php spark serve --port=8000

# Iniciar WebSocket server (terminal separado)
php scripts/websocket_server.php

# Iniciar CompreFace (Docker)
cd docker/compreface
docker-compose up -d

# Compilar assets
npm run build

# Verificar se tudo est√° OK
curl http://localhost:8000
# Deve retornar p√°gina de login
```

### 7.2 Comandos de Desenvolvimento

```bash
# Criar nova migration
php spark make:migration create_nova_tabela_table

# Criar novo model
php spark make:model NovoModel

# Criar novo controller
php spark make:controller NovoController

# Rodar testes
./vendor/bin/phpunit

# Rodar testes com coverage
./vendor/bin/phpunit --coverage-html coverage/

# Limpar cache
php spark cache:clear

# Ver rotas dispon√≠veis
php spark routes

# Gerar documenta√ß√£o da API
php spark api:docs

# Backup do banco
php spark db:backup

# Restaurar backup
php spark db:restore backup_2024_01_15.sql
```

### 7.3 Comandos de Produ√ß√£o

```bash
# Deploy automatizado
./scripts/deploy.sh

# Verificar logs
tail -f storage/logs/log-$(date +%Y-%m-%d).log

# Verificar status dos servi√ßos
systemctl status nginx
systemctl status php8.1-fpm
systemctl status mysql

# Reiniciar WebSocket
systemctl restart websocket

# Processar fila de jobs
php scripts/worker.php

# Rodar c√°lculo de jornada (cron di√°rio)
php scripts/cron_calculate.php

# Monitorar performance
htop

# Verificar uso de disco
df -h

# Verificar conex√µes MySQL
mysql -e "SHOW PROCESSLIST;"
```

---

## 8. BOAS PR√ÅTICAS E CONVEN√á√ïES

### 8.1 Git Workflow

```bash
# Feature branch
git checkout -b feature/reconhecimento-facial
# Develop
git commit -m "feat: adicionar reconhecimento facial com CompreFace"
# Push
git push origin feature/reconhecimento-facial
# Pull Request ‚Üí code review ‚Üí merge to main

# Conventional Commits:
# feat: nova funcionalidade
# fix: corre√ß√£o de bug
# docs: documenta√ß√£o
# style: formata√ß√£o
# refactor: refatora√ß√£o
# test: testes
# chore: tarefas de build
```

### 8.2 Code Style

```php
<?php

namespace App\Controllers\Timesheet;

use App\Models\TimePunchModel;
use App\Services\ICP\NSRGeneratorService;
use CodeIgniter\HTTP\ResponseInterface;

class TimePunchController extends BaseController
{
    protected TimePunchModel $timePunchModel;
    protected NSRGeneratorService $nsrGenerator;
    
    public function __construct()
    {
        $this->timePunchModel = new TimePunchModel();
        $this->nsrGenerator = new NSRGeneratorService();
    }
    
    /**
     * Registra marca√ß√£o de ponto do funcion√°rio
     *
     * @return ResponseInterface
     */
    public function punch(): ResponseInterface
    {
        // Validar hor√°rio permitido
        if (! $this->isWithinAllowedTime()) {
            return $this->fail('Fora do hor√°rio de expediente', 403);
        }
        
        // Buscar √∫ltimo registro
        $lastPunch = $this->timePunchModel->getLastPunch($this->user->id);
        
        // Determinar tipo de marca√ß√£o
        $punchType = $this->determinePunchType($lastPunch);
        
        // Processar registro
        $data = [
            'employee_id' => $this->user->id,
            'punch_type' => $punchType,
            'punch_time' => date('Y-m-d H:i:s'),
            'location_lat' => $this->request->getPost('lat'),
            'location_lng' => $this->request->getPost('lng'),
            'nsr' => $this->nsrGenerator->generate(),
        ];
        
        $data['sha256_hash'] = $this->calculateHash($data);
        
        $punchId = $this->timePunchModel->insert($data);
        
        // Gerar comprovante
        $this->generateReceipt($punchId);
        
        return $this->respond([
            'success' => true,
            'message' => 'Ponto registrado com sucesso',
            'data' => ['punch_id' => $punchId]
        ]);
    }
}
```

### 8.3 Estrutura de Response API

```json
{
  "success": true,
  "message": "Opera√ß√£o realizada com sucesso",
  "data": {
    "id": 123,
    "created_at": "2024-01-15T10:30:00Z"
  },
  "meta": {
    "page": 1,
    "per_page": 50,
    "total": 150
  }
}
```

**Errors:**

```json
{
  "success": false,
  "message": "Erro ao processar requisi√ß√£o",
  "errors": {
    "email": ["O campo email √© obrigat√≥rio"],
    "password": ["A senha deve ter no m√≠nimo 8 caracteres"]
  },
  "code": "VALIDATION_ERROR"
}
```

---

## 9. MONITORAMENTO E MANUTEN√á√ÉO

### 9.1 Logs Importantes

```bash
# Application logs
storage/logs/log-2024-01-15.log

# Nginx access
/var/log/nginx/access.log

# Nginx error
/var/log/nginx/error.log

# PHP-FPM
/var/log/php8.1-fpm.log

# MySQL slow queries
/var/log/mysql/slow-query.log

# WebSocket
storage/logs/websocket.log

# CompreFace
docker logs compreface-api
```

### 9.2 M√©tricas para Monitorar

- **Uptime:** Target 99.9%
- **Response Time:** Target <500ms (p95)
- **Error Rate:** Target <0.1%
- **Database Connections:** Monitor pool
- **Disk Usage:** Alert se >80%
- **Memory Usage:** Alert se >85%
- **CompreFace Health:** Check /health endpoint
- **WebSocket Connections:** Monitor count
- **Queue Size:** Alert se >1000 jobs
- **Failed Jobs:** Alert se >10 em 1h

### 9.3 Backups

```bash
# Backup di√°rio autom√°tico (cron)
0 2 * * * /path/scripts/backup.sh

# Backup manual
php spark db:backup
# Gera: backups/ponto_2024_01_15_02_00.sql.gz

# Backup de uploads
tar -czf uploads_$(date +%Y%m%d).tar.gz storage/uploads/

# Backup de configura√ß√µes
tar -czf configs_$(date +%Y%m%d).tar.gz .env app/Config/

# Reten√ß√£o: 7 backups di√°rios, 4 semanais, 12 mensais
```

---

## 10. ROADMAP FUTURO

### 10.1 Vers√£o 2.0 (Futuro)

- **Integra√ß√£o com folha de pagamento** (TOTVS, SAP, outros)
- **App mobile nativo** (React Native) com registro offline
- **Reconhecimento de √≠ris** (biometria adicional)
- **IA para detec√ß√£o de anomalias** (padr√µes suspeitos)
- **Multi-tenancy** (suportar m√∫ltiplas empresas)
- **SSO** (Single Sign-On) com SAML/OAuth
- **API p√∫blica** para integra√ß√µes
- **An√°lise preditiva** de absente√≠smo
- **Gamifica√ß√£o** (badges, rankings de pontualidade)
- **Dashboard executivo** com BI

---

## 11. CONTATOS E SUPORTE

### 11.1 Equipe

- **Tech Lead:** [Nome] - [email]
- **Backend Developer:** [Nome] - [email]
- **Frontend Developer:** [Nome] - [email]
- **QA Engineer:** [Nome] - [email]
- **DevOps:** [Nome] - [email]

### 11.2 Canais de Suporte

- **Documenta√ß√£o:** https://docs.ponto-eletronico.com.br
- **Issues:** https://github.com/empresa/ponto-eletronico/issues
- **Slack:** #ponto-eletronico
- **E-mail:** suporte@empresa.com.br
- **Telefone:** +55 (11) 1234-5678

---

## 12. GLOSS√ÅRIO

- **AFD:** Arquivo Fonte de Dados (Portaria 671)
- **AEJ:** Arquivo Eletr√¥nico de Jornada
- **CLT:** Consolida√ß√£o das Leis do Trabalho
- **CompreFace:** Software open-source de reconhecimento facial
- **ICP-Brasil:** Infraestrutura de Chaves P√∫blicas Brasileira
- **LGPD:** Lei Geral de Prote√ß√£o de Dados (Lei 13.709/2018)
- **NSR:** N√∫mero Sequencial de Registro
- **REP-P:** Registrador Eletr√¥nico de Ponto Ponto (Programa)
- **SourceAFIS:** Biblioteca open-source para matching de impress√µes digitais

---

**FIM DO PLANO T√âCNICO COMPLETO PARA CLAUDE CODE**

Este documento serve como guia completo para desenvolvimento agentico do sistema de ponto eletr√¥nico usando Claude Code. Cada comando pode ser executado sequencialmente seguindo as fases, ou podem ser adaptados conforme necessidade espec√≠fica do projeto.

Para iniciar o desenvolvimento, execute os comandos da FASE 1 na ordem apresentada. Certifique-se de ter o ambiente preparado com PHP 8.1+, Composer, MySQL 8.0+ e Docker antes de come√ßar.
