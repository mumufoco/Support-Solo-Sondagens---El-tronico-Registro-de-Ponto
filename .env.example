#--------------------------------------------------------------------
# AMBIENTE DE CONFIGURAÇÃO - Sistema de Ponto Eletrônico
# Versão 2.0 - Com DeepFace
#--------------------------------------------------------------------

#--------------------------------------------------------------------
# AMBIENTE
#--------------------------------------------------------------------
CI_ENVIRONMENT = development

#--------------------------------------------------------------------
# APLICAÇÃO
#--------------------------------------------------------------------
app.baseURL = 'http://localhost:8080'
app.appTimezone = 'America/Sao_Paulo'
app.defaultLocale = 'pt-BR'
app.charset = 'UTF-8'

# Configurações de sessão
app.sessionDriver = 'CodeIgniter\Session\Handlers\FileHandler'
app.sessionCookieName = 'ponto_session'
app.sessionExpiration = 7200
app.sessionSavePath = null
app.sessionMatchIP = false
app.sessionTimeToUpdate = 300
app.sessionRegenerateDestroy = false

# Cookies
app.cookiePrefix = ''
app.cookieDomain = ''
app.cookiePath = '/'
app.cookieSecure = false
app.cookieHTTPOnly = true
app.cookieSameSite = 'Lax'

# CSP (Content Security Policy)
app.CSPEnabled = false

#--------------------------------------------------------------------
# BANCO DE DADOS
#--------------------------------------------------------------------
database.default.hostname = localhost
database.default.database = ponto_eletronico
database.default.username = root
database.default.password =
database.default.DBDriver = MySQLi
database.default.DBPrefix =
database.default.port = 3306
database.default.charset = utf8mb4
database.default.DBCollat = utf8mb4_unicode_ci

# Configurações de pool de conexões
database.default.pConnect = false
database.default.DBDebug = true
database.default.strictOn = false
database.default.failover = []

#--------------------------------------------------------------------
# SEGURANÇA E CRIPTOGRAFIA
#--------------------------------------------------------------------
# IMPORTANTE: Gere uma chave aleatória com: php spark key:generate
encryption.key =
encryption.driver = OpenSSL
encryption.blockSize = 16
encryption.digest = SHA512

# Chave para criptografia biométrica (256 bits em hex)
# Gere com: openssl rand -hex 32
BIOMETRIC_ENCRYPTION_KEY =

#--------------------------------------------------------------------
# AUTENTICAÇÃO (CodeIgniter Shield)
#--------------------------------------------------------------------
auth.sessionConfig.field = user_id
auth.sessionConfig.allowRemembering = true
auth.sessionConfig.rememberCookieName = remember
auth.sessionConfig.rememberLength = 2592000

# Proteção contra Brute Force
auth.recordLoginAttempt = true
auth.maxLoginAttempts = 5
auth.minutesToBlock = 15

# Validação de senha
auth.minimumPasswordLength = 8
auth.passwordValidators = StrongPassword

# JWT para API (opcional)
JWT_SECRET_KEY =
JWT_TIME_TO_LIVE = 3600

#--------------------------------------------------------------------
# DEEPFACE API - Reconhecimento Facial
#--------------------------------------------------------------------
DEEPFACE_API_URL = http://localhost:5000
DEEPFACE_API_TIMEOUT = 30
DEEPFACE_THRESHOLD = 0.40
DEEPFACE_MODEL = VGG-Face
DEEPFACE_DETECTOR_BACKEND = opencv
DEEPFACE_DISTANCE_METRIC = cosine

# Anti-spoofing
DEEPFACE_ENABLE_ANTISPOOFING = true
DEEPFACE_MIN_FACE_SIZE = 100

#--------------------------------------------------------------------
# SOURCEAFIS - Biometria Digital (Opcional)
#--------------------------------------------------------------------
SOURCEAFIS_API_URL = http://localhost:8081
SOURCEAFIS_ENABLED = false
SOURCEAFIS_THRESHOLD = 40

#--------------------------------------------------------------------
# GEOLOCALIZAÇÃO
#--------------------------------------------------------------------
# Raio da cerca virtual em metros
GEOFENCE_RADIUS = 100

# Nominatim para geocodificação (OpenStreetMap)
NOMINATIM_API_URL = https://nominatim.openstreetmap.org
NOMINATIM_USER_AGENT = PontoEletronicoApp/1.0

# Leaflet.js CDN
LEAFLET_VERSION = 1.9.4

#--------------------------------------------------------------------
# CERTIFICADO ICP-BRASIL
#--------------------------------------------------------------------
# Caminho para certificado e chave privada
ICP_CERTIFICATE_PATH = storage/keys/icp/certificate.pem
ICP_PRIVATE_KEY_PATH = storage/keys/icp/private.key
ICP_PRIVATE_KEY_PASSWORD =

# Configurações NSR (Numeração Sequencial de Registros)
NSR_START_NUMBER = 1
NSR_PREFIX = NSR

#--------------------------------------------------------------------
# ARMAZENAMENTO E UPLOAD
#--------------------------------------------------------------------
# Tamanho máximo de upload em MB
MAX_UPLOAD_SIZE = 5

# Formatos permitidos para uploads
ALLOWED_IMAGE_FORMATS = jpg,jpeg,png
ALLOWED_DOCUMENT_FORMATS = pdf,doc,docx

# Diretórios de storage
STORAGE_PATH = storage
UPLOAD_PATH = storage/uploads
FACES_PATH = storage/faces
LOGS_PATH = storage/logs

#--------------------------------------------------------------------
# JORNADA DE TRABALHO
#--------------------------------------------------------------------
# Horário padrão de expediente
WORK_START_TIME = 08:00:00
WORK_END_TIME = 18:00:00

# Intervalo obrigatório (minutos) para jornadas acima de 6h
MANDATORY_BREAK_MINUTES = 60

# Tolerância para atraso/saída antecipada (minutos)
TOLERANCE_MINUTES = 15

# Máximo de marcações por dia
MAX_PUNCHES_PER_DAY = 4

#--------------------------------------------------------------------
# NOTIFICAÇÕES
#--------------------------------------------------------------------
# Email
email.fromEmail = noreply@pontoeletronico.com.br
email.fromName = Sistema de Ponto Eletrônico
email.protocol = smtp
email.SMTPHost = smtp.gmail.com
email.SMTPUser =
email.SMTPPass =
email.SMTPPort = 587
email.SMTPCrypto = tls
email.mailType = html
email.charset = utf-8

# SMS (Twilio - Opcional)
SMS_ENABLED = false
TWILIO_ACCOUNT_SID =
TWILIO_AUTH_TOKEN =
TWILIO_FROM_NUMBER =

# Push Notifications (Firebase - Opcional)
PUSH_ENABLED = false
FIREBASE_SERVER_KEY =
FIREBASE_SENDER_ID =

#--------------------------------------------------------------------
# WEBSOCKET - Chat Interno
#--------------------------------------------------------------------
WEBSOCKET_HOST = localhost
WEBSOCKET_PORT = 8090
WEBSOCKET_ENABLED = true

#--------------------------------------------------------------------
# FILAS E PROCESSAMENTO
#--------------------------------------------------------------------
QUEUE_DRIVER = database
QUEUE_CONNECTION = default

#--------------------------------------------------------------------
# RELATÓRIOS E EXPORTAÇÃO
#--------------------------------------------------------------------
# PDF
PDF_ORIENTATION = portrait
PDF_UNIT = mm
PDF_FORMAT = A4
PDF_UNICODE = true
PDF_ENCODING = UTF-8

# Excel
EXCEL_DEFAULT_FORMAT = xlsx

# Logotipo para relatórios
REPORT_LOGO_PATH = public/assets/images/logo.png

#--------------------------------------------------------------------
# LGPD - CONFORMIDADE
#--------------------------------------------------------------------
# Tempo de retenção de dados (dias)
DATA_RETENTION_DAYS = 1825

# Tempo de retenção de logs de auditoria (dias)
AUDIT_LOG_RETENTION_DAYS = 3650

# Email do DPO (Data Protection Officer)
DPO_EMAIL = dpo@empresa.com.br
DPO_NAME = Responsável pela Proteção de Dados

# Anonimização automática de dados após término de vínculo (dias)
ANONYMIZATION_AFTER_DAYS = 90

#--------------------------------------------------------------------
# API EXTERNA (Opcional)
#--------------------------------------------------------------------
# API de integração com sistemas de RH
EXTERNAL_API_ENABLED = false
EXTERNAL_API_URL =
EXTERNAL_API_KEY =
EXTERNAL_API_SECRET =

#--------------------------------------------------------------------
# CACHE
#--------------------------------------------------------------------
cache.handler = file
cache.storePath = storage/cache/

#--------------------------------------------------------------------
# LOGS
#--------------------------------------------------------------------
logger.threshold = 4

#--------------------------------------------------------------------
# CORS (Cross-Origin Resource Sharing)
#--------------------------------------------------------------------
CORS_ENABLED = true
CORS_ALLOWED_ORIGINS = http://localhost:8080
CORS_ALLOWED_METHODS = GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS = Content-Type,Authorization,X-Requested-With

#--------------------------------------------------------------------
# DESENVOLVIMENTO E DEBUG
#--------------------------------------------------------------------
# Toolbar de debug (apenas em desenvolvimento)
toolbar.enabled = true

# Kint (dump de variáveis)
app.showDebugBacktrace = true

# Logs de query SQL
database.default.DBDebug = true

#--------------------------------------------------------------------
# BACKUP
#--------------------------------------------------------------------
BACKUP_ENABLED = true
BACKUP_PATH = storage/backups
BACKUP_RETENTION_DAYS = 30

#--------------------------------------------------------------------
# QR CODE
#--------------------------------------------------------------------
QRCODE_SIZE = 300
QRCODE_MARGIN = 10
QRCODE_EXPIRATION_MINUTES = 5

#--------------------------------------------------------------------
# RATE LIMITING
#--------------------------------------------------------------------
RATE_LIMIT_ENABLED = true
RATE_LIMIT_REQUESTS = 100
RATE_LIMIT_PERIOD = 60

#--------------------------------------------------------------------
# MANUTENÇÃO
#--------------------------------------------------------------------
MAINTENANCE_MODE = false
MAINTENANCE_MESSAGE = Sistema em manutenção. Retornaremos em breve.

#--------------------------------------------------------------------
# VERSÃO DO SISTEMA
#--------------------------------------------------------------------
APP_VERSION = 2.0.0
APP_NAME = Sistema de Ponto Eletrônico
