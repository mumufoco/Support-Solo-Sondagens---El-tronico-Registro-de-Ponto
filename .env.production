#--------------------------------------------------------------------
# PRODUCTION ENVIRONMENT CONFIGURATION
# Sistema de Registro de Ponto Eletrônico
# Copy this file to .env for production deployment
#--------------------------------------------------------------------

#--------------------------------------------------------------------
# ENVIRONMENT
#--------------------------------------------------------------------
CI_ENVIRONMENT = production

#--------------------------------------------------------------------
# APP
#--------------------------------------------------------------------
app.baseURL = 'https://your-domain.com/'
app.indexPage = ''
app.forceGlobalSecureRequests = true
app.appTimezone = 'America/Sao_Paulo'
app.defaultLocale = 'pt-BR'
app.supportedLocales = ['pt-BR']

# ENCRYPTION - Generate with: php spark key:generate
encryption.key = 'YOUR-32-CHARACTER-ENCRYPTION-KEY-HERE'

#--------------------------------------------------------------------
# DATABASE (Docker configuration)
#--------------------------------------------------------------------
database.default.hostname = mysql
database.default.database = ponto_eletronico
database.default.username = ponto_user
database.default.password = CHANGE_THIS_PASSWORD
database.default.DBDriver = MySQLi
database.default.DBPrefix =
database.default.port = 3306
database.default.charset = utf8mb4
database.default.DBCollat = utf8mb4_unicode_ci

# Environment variables for docker-compose
DB_HOST = mysql
DB_DATABASE = ponto_eletronico
DB_USERNAME = ponto_user
DB_PASSWORD = CHANGE_THIS_PASSWORD

#--------------------------------------------------------------------
# REDIS CACHE
#--------------------------------------------------------------------
cache.handler = 'redis'
cache.redis.host = redis
cache.redis.password = CHANGE_THIS_REDIS_PASSWORD
cache.redis.port = 6379
cache.redis.timeout = 0
cache.redis.database = 0

REDIS_HOST = redis
REDIS_PORT = 6379
REDIS_PASSWORD = CHANGE_THIS_REDIS_PASSWORD

#--------------------------------------------------------------------
# SESSION
#--------------------------------------------------------------------
session.driver = 'CodeIgniter\Session\Handlers\RedisHandler'
session.cookieName = 'ponto_session'
session.expiration = 7200
session.savePath = 'redis://redis:6379?password=CHANGE_THIS_REDIS_PASSWORD&database=1'
session.matchIP = false
session.timeToUpdate = 300
session.regenerateDestroy = false

#--------------------------------------------------------------------
# SECURITY
#--------------------------------------------------------------------
security.csrfProtection = 'cookie'
security.tokenRandomize = true
security.tokenName = 'csrf_token_name'
security.headerName = 'X-CSRF-TOKEN'
security.cookieName = 'csrf_cookie_name'
security.expires = 7200
security.regenerate = true

#--------------------------------------------------------------------
# EMAIL
#--------------------------------------------------------------------
email.protocol = 'smtp'
email.SMTPHost = 'smtp.gmail.com'
email.SMTPUser = 'your-email@gmail.com'
email.SMTPPass = 'your-app-password'
email.SMTPPort = 587
email.SMTPCrypto = 'tls'
email.mailType = 'html'
email.charset = 'utf-8'
email.fromEmail = 'noreply@your-domain.com'
email.fromName = 'Sistema Ponto Eletrônico'

#--------------------------------------------------------------------
# DEEPFACE API (Facial Recognition - Docker)
#--------------------------------------------------------------------
DEEPFACE_API_URL = 'http://deepface:5000'
DEEPFACE_API_KEY = 'CHANGE_THIS_API_KEY'
DEEPFACE_THRESHOLD = 0.40
DEEPFACE_MODEL = 'VGG-Face'
DEEPFACE_DETECTOR = 'opencv'
DEEPFACE_ANTI_SPOOFING = true

#--------------------------------------------------------------------
# GEOLOCATION
#--------------------------------------------------------------------
NOMINATIM_URL = 'https://nominatim.openstreetmap.org'
NOMINATIM_EMAIL = 'admin@your-domain.com'
GEOFENCE_DEFAULT_RADIUS = 100
GEOFENCE_ENABLED = true
GEOFENCE_STRICT_MODE = false

#--------------------------------------------------------------------
# FILE UPLOAD
#--------------------------------------------------------------------
UPLOAD_MAX_SIZE = 5242880
UPLOAD_ALLOWED_TYPES = 'jpg|jpeg|png|pdf'

#--------------------------------------------------------------------
# LGPD COMPLIANCE
#--------------------------------------------------------------------
LGPD_DPO_NAME = 'Nome do DPO'
LGPD_DPO_EMAIL = 'dpo@your-domain.com'
LGPD_DATA_RETENTION_DAYS = 1825
LGPD_CONSENT_VERSION = '1.0'

#--------------------------------------------------------------------
# COMPANY INFO (MTE 671/2021)
#--------------------------------------------------------------------
COMPANY_NAME = 'Support Solo Sondagens'
COMPANY_CNPJ = '00.000.000/0001-00'
COMPANY_ADDRESS = 'Endereço da Empresa'
COMPANY_PHONE = '(11) 1234-5678'
MTE_NSR_PREFIX = 'PNT'

#--------------------------------------------------------------------
# LOGGING
#--------------------------------------------------------------------
logger.threshold = 3

#--------------------------------------------------------------------
# RATE LIMITING
#--------------------------------------------------------------------
RATE_LIMIT_ENABLED = true
RATE_LIMIT_AUTH_ATTEMPTS = 5
RATE_LIMIT_AUTH_WINDOW = 300
RATE_LIMIT_API_REQUESTS = 60
RATE_LIMIT_API_WINDOW = 60

#--------------------------------------------------------------------
# BACKUP
#--------------------------------------------------------------------
BACKUP_ENABLED = true
BACKUP_PATH = WRITEPATH . 'backups'
BACKUP_RETENTION_DAYS = 30
BACKUP_SCHEDULE = '0 2 * * *'

#--------------------------------------------------------------------
# MONITORING (Optional - Sentry)
#--------------------------------------------------------------------
# SENTRY_DSN =
# SENTRY_ENVIRONMENT = production
# SENTRY_TRACES_SAMPLE_RATE = 0.1

#--------------------------------------------------------------------
# OPTIONAL INTEGRATIONS
#--------------------------------------------------------------------
# WhatsApp Business API
WHATSAPP_ENABLED = false
# WHATSAPP_API_URL =
# WHATSAPP_API_TOKEN =

# SMS Provider
SMS_ENABLED = false
# SMS_PROVIDER =
# SMS_API_KEY =
